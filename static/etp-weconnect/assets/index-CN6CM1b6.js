import{r as a,j as e,B as D,q as P,J as k,g as L,R as F,k as y,S as G,l as W,h as X,P as K,m as S}from"./index-C0Q7XtGg.js";import{u as Z,D as ee,a as te,b as oe,h as re,i as se,j as ne,c as ce,d as ae,e as ie,f as le,g as ue,k as de,l as fe,m as me,n as pe,o as xe}from"./drawer-DD3Sxs_e.js";import{u as ve}from"./index-BPdx9avz.js";const Me=({id:t,action:r,actionLabel:i,title:s,description:R,successMessage:C=null,trigger:I,variant:m="outline",triggerVariant:x})=>{const[l,h]=a.useState(!1),[v,g]=a.useState(!1),[u,o]=a.useState(null),d=Z("(min-width: 768px)"),f=async j=>{j.preventDefault(),g(!0);try{await r(t),C&&k.success(C),h(!1)}catch{k.error("Une erreur est survenue, veuillez contacter le support.")}g(!1)},n=()=>e.jsxs(e.Fragment,{children:[e.jsxs(ce,{children:[e.jsx(ae,{className:m=="destructive"&&"text-destructive",children:s}),e.jsx(ie,{children:R})]}),u&&e.jsx("p",{className:"text-destructive text-sm",children:u}),e.jsx(le,{className:"sm:justify-start",children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(D,{onClick:f,variant:m,disabled:v,children:v?e.jsx(P,{className:"animate-spin"}):i}),e.jsx(ue,{asChild:!0,children:e.jsx(D,{variant:"outline",children:"Annuler"})})]})})]}),c=()=>e.jsxs(e.Fragment,{children:[e.jsxs(de,{children:[e.jsx(fe,{className:m=="destructive"&&"text-destructive",children:s}),e.jsx(me,{children:R})]}),u&&e.jsx("p",{className:"text-destructive text-sm",children:u}),e.jsx(pe,{className:"pt-2",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{className:"w-full",onClick:f,variant:m,disabled:v,children:v?e.jsx(P,{className:"animate-spin"}):i}),e.jsx(xe,{asChild:!0,children:e.jsx(D,{className:"w-full",variant:"outline",children:"Annuler"})})]})})]});return e.jsx(e.Fragment,{children:d?e.jsxs(ee,{open:l,onOpenChange:h,children:[e.jsx(te,{asChild:!0,children:e.jsx(D,{variant:x||m,children:I})}),e.jsx(oe,{className:"sm:max-w-[425px]",children:e.jsx(n,{})})]}):e.jsxs(re,{open:l,onOpenChange:h,children:[e.jsx(se,{asChild:!0,children:e.jsx(D,{variant:x||m,children:I})}),e.jsx(ne,{children:e.jsx(c,{})})]})})};function Ce(t){const r=t+"CollectionProvider",[i,s]=L(r),[R,C]=i(r,{collectionRef:{current:null},itemMap:new Map}),I=u=>{const{scope:o,children:d}=u,f=F.useRef(null),n=F.useRef(new Map).current;return e.jsx(R,{scope:o,itemMap:n,collectionRef:f,children:d})};I.displayName=r;const m=t+"CollectionSlot",x=F.forwardRef((u,o)=>{const{scope:d,children:f}=u,n=C(m,d),c=y(o,n.collectionRef);return e.jsx(G,{ref:c,children:f})});x.displayName=m;const l=t+"CollectionItemSlot",h="data-radix-collection-item",v=F.forwardRef((u,o)=>{const{scope:d,children:f,...n}=u,c=F.useRef(null),j=y(o,c),w=C(l,d);return F.useEffect(()=>(w.itemMap.set(c,{ref:c,...n}),()=>void w.itemMap.delete(c))),e.jsx(G,{[h]:"",ref:j,children:f})});v.displayName=l;function g(u){const o=C(t+"CollectionConsumer",u);return F.useCallback(()=>{const f=o.collectionRef.current;if(!f)return[];const n=Array.from(f.querySelectorAll(`[${h}]`));return Array.from(o.itemMap.values()).sort((w,E)=>n.indexOf(w.ref.current)-n.indexOf(E.ref.current))},[o.collectionRef,o.itemMap])}return[{Provider:I,Slot:x,ItemSlot:v},g,s]}var he=a.createContext(void 0);function ge(t){const r=a.useContext(he);return t||r||"ltr"}var A="rovingFocusGroup.onEntryFocus",Ie={bubbles:!1,cancelable:!0},T="RovingFocusGroup",[_,U,Re]=Ce(T),[je,Oe]=L(T,[Re]),[we,be]=je(T),B=a.forwardRef((t,r)=>e.jsx(_.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(_.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Fe,{...t,ref:r})})}));B.displayName=T;var Fe=a.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:i,orientation:s,loop:R=!1,dir:C,currentTabStopId:I,defaultCurrentTabStopId:m,onCurrentTabStopIdChange:x,onEntryFocus:l,preventScrollOnEntryFocus:h=!1,...v}=t,g=a.useRef(null),u=y(r,g),o=ge(C),[d=null,f]=W({prop:I,defaultProp:m,onChange:x}),[n,c]=a.useState(!1),j=X(l),w=U(i),E=a.useRef(!1),[z,M]=a.useState(0);return a.useEffect(()=>{const p=g.current;if(p)return p.addEventListener(A,j),()=>p.removeEventListener(A,j)},[j]),e.jsx(we,{scope:i,orientation:s,dir:o,loop:R,currentTabStopId:d,onItemFocus:a.useCallback(p=>f(p),[f]),onItemShiftTab:a.useCallback(()=>c(!0),[]),onFocusableItemAdd:a.useCallback(()=>M(p=>p+1),[]),onFocusableItemRemove:a.useCallback(()=>M(p=>p-1),[]),children:e.jsx(K.div,{tabIndex:n||z===0?-1:0,"data-orientation":s,...v,ref:u,style:{outline:"none",...t.style},onMouseDown:S(t.onMouseDown,()=>{E.current=!0}),onFocus:S(t.onFocus,p=>{const J=!E.current;if(p.target===p.currentTarget&&J&&!n){const O=new CustomEvent(A,Ie);if(p.currentTarget.dispatchEvent(O),!O.defaultPrevented){const N=w().filter(b=>b.focusable),V=N.find(b=>b.active),Q=N.find(b=>b.id===d),$=[V,Q,...N].filter(Boolean).map(b=>b.ref.current);q($,h)}}E.current=!1}),onBlur:S(t.onBlur,()=>c(!1))})})}),H="RovingFocusGroupItem",Y=a.forwardRef((t,r)=>{const{__scopeRovingFocusGroup:i,focusable:s=!0,active:R=!1,tabStopId:C,...I}=t,m=ve(),x=C||m,l=be(H,i),h=l.currentTabStopId===x,v=U(i),{onFocusableItemAdd:g,onFocusableItemRemove:u}=l;return a.useEffect(()=>{if(s)return g(),()=>u()},[s,g,u]),e.jsx(_.ItemSlot,{scope:i,id:x,focusable:s,active:R,children:e.jsx(K.span,{tabIndex:h?0:-1,"data-orientation":l.orientation,...I,ref:r,onMouseDown:S(t.onMouseDown,o=>{s?l.onItemFocus(x):o.preventDefault()}),onFocus:S(t.onFocus,()=>l.onItemFocus(x)),onKeyDown:S(t.onKeyDown,o=>{if(o.key==="Tab"&&o.shiftKey){l.onItemShiftTab();return}if(o.target!==o.currentTarget)return;const d=Ee(o,l.orientation,l.dir);if(d!==void 0){if(o.metaKey||o.ctrlKey||o.altKey||o.shiftKey)return;o.preventDefault();let n=v().filter(c=>c.focusable).map(c=>c.ref.current);if(d==="last")n.reverse();else if(d==="prev"||d==="next"){d==="prev"&&n.reverse();const c=n.indexOf(o.currentTarget);n=l.loop?Te(n,c+1):n.slice(c+1)}setTimeout(()=>q(n))}})})})});Y.displayName=H;var De={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Se(t,r){return r!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Ee(t,r,i){const s=Se(t.key,i);if(!(r==="vertical"&&["ArrowLeft","ArrowRight"].includes(s))&&!(r==="horizontal"&&["ArrowUp","ArrowDown"].includes(s)))return De[s]}function q(t,r=!1){const i=document.activeElement;for(const s of t)if(s===i||(s.focus({preventScroll:r}),document.activeElement!==i))return}function Te(t,r){return t.map((i,s)=>t[(r+s)%t.length])}var Pe=B,ke=Y;export{ke as I,Me as M,Pe as R,Ce as a,Oe as c,ge as u};
