import{c as Je,r as t,j as e,a as C,B as k,I as ne,q as Se,J as Y,y as Ee,L as ue}from"./index-C0Q7XtGg.js";import{u as qe,D as Ue,a as Qe,b as Ke,c as Xe,d as Ye,e as Ze,f as et,g as tt,h as nt,i as at,j as rt,k as lt,l as st,m as ot,n as it,o as ct}from"./drawer-DD3Sxs_e.js";import{L as V}from"./label-sMyQmfMK.js";import{B as dt,a as ut,b as me,c as pe,d as Me}from"./breadcrumb-O9G5SVwH.js";import{E as mt}from"./ellipsis-vertical-vf8p0F8z.js";import"./index-BPdx9avz.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=Je("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);var ht=Object.defineProperty,ft=Object.defineProperties,xt=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,Te=(a,n,r)=>n in a?ht(a,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[n]=r,gt=(a,n)=>{for(var r in n||(n={}))ke.call(n,r)&&Te(a,r,n[r]);if(le)for(var r of le(n))Pe.call(n,r)&&Te(a,r,n[r]);return a},jt=(a,n)=>ft(a,xt(n)),vt=(a,n)=>{var r={};for(var s in a)ke.call(a,s)&&n.indexOf(s)<0&&(r[s]=a[s]);if(a!=null&&le)for(var s of le(a))n.indexOf(s)<0&&Pe.call(a,s)&&(r[s]=a[s]);return r},bt="^\\d+$";function wt(a){let n=setTimeout(a,0),r=setTimeout(a,10),s=setTimeout(a,50);return[n,r,s]}function yt(a){let n=t.useRef();return t.useEffect(()=>{n.current=a}),n.current}var Ct=18,De=40,Nt=`${De}px`,St=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function Et({containerRef:a,inputRef:n,pushPasswordManagerStrategy:r,isFocused:s}){let m=t.useRef({done:!1,refocused:!1}),[c,p]=t.useState(!1),[u,A]=t.useState(!1),[N,O]=t.useState(!1),b=t.useMemo(()=>r==="none"?!1:(r==="increase-width"||r==="experimental-no-flickering")&&c&&u,[c,u,r]),w=t.useCallback(()=>{let x=a.current,h=n.current;if(!x||!h||N||r==="none")return;let i=x,M=i.getBoundingClientRect().left+i.offsetWidth,H=i.getBoundingClientRect().top+i.offsetHeight/2,Z=M-Ct,ee=H;if(!(document.querySelectorAll(St).length===0&&document.elementFromPoint(Z,ee)===x)&&(p(!0),O(!0),!m.current.refocused&&document.activeElement===h)){let J=[h.selectionStart,h.selectionEnd];h.blur(),h.focus(),h.setSelectionRange(J[0],J[1]),m.current.refocused=!0}},[a,n,N,r]);return t.useEffect(()=>{let x=a.current;if(!x||r==="none")return;function h(){let M=window.innerWidth-x.getBoundingClientRect().right;A(M>=De)}h();let i=setInterval(h,1e3);return()=>{clearInterval(i)}},[a,r]),t.useEffect(()=>{let x=s||document.activeElement===n.current;if(r==="none"||!x)return;let h=setTimeout(w,0),i=setTimeout(w,2e3),M=setTimeout(w,5e3),H=setTimeout(()=>{O(!0)},6e3);return()=>{clearTimeout(h),clearTimeout(i),clearTimeout(M),clearTimeout(H)}},[n,s,r,w]),{hasPWMBadge:c,willPushPWMBadge:b,PWM_BADGE_SPACE_WIDTH:Nt}}var Re=t.createContext({}),Ae=t.forwardRef((a,n)=>{var r=a,{value:s,onChange:m,maxLength:c,textAlign:p="left",pattern:u=bt,inputMode:A="numeric",onComplete:N,pushPasswordManagerStrategy:O="increase-width",containerClassName:b,noScriptCSSFallback:w=Mt,render:x,children:h}=r,i=vt(r,["value","onChange","maxLength","textAlign","pattern","inputMode","onComplete","pushPasswordManagerStrategy","containerClassName","noScriptCSSFallback","render","children"]),M,H,Z,ee,J;let[Fe,Le]=t.useState(typeof i.defaultValue=="string"?i.defaultValue:""),g=s??Fe,B=yt(g),q=t.useCallback(l=>{m==null||m(l),Le(l)},[m]),E=t.useMemo(()=>u?typeof u=="string"?new RegExp(u):u:null,[u]),f=t.useRef(null),se=t.useRef(null),oe=t.useRef({value:g,onChange:q,isIOS:typeof window<"u"&&((H=(M=window==null?void 0:window.CSS)==null?void 0:M.supports)==null?void 0:H.call(M,"-webkit-touch-callout","none"))}),te=t.useRef({prev:[(Z=f.current)==null?void 0:Z.selectionStart,(ee=f.current)==null?void 0:ee.selectionEnd,(J=f.current)==null?void 0:J.selectionDirection]});t.useImperativeHandle(n,()=>f.current,[]),t.useEffect(()=>{let l=f.current,o=se.current;if(!l||!o)return;oe.current.value!==l.value&&oe.current.onChange(l.value),te.current.prev=[l.selectionStart,l.selectionEnd,l.selectionDirection];function j(){if(document.activeElement!==l){Q(null),K(null);return}let d=l.selectionStart,S=l.selectionEnd,P=l.selectionDirection,F=l.maxLength,L=l.value,$=te.current.prev,D=-1,R=-1,W;if(L.length!==0&&d!==null&&S!==null){let Ge=d===S,$e=d===L.length&&L.length<F;if(Ge&&!$e){let _=d;if(_===0)D=0,R=1,W="forward";else if(_===F)D=_-1,R=_,W="backward";else if(F>1&&L.length>1){let de=0;if($[0]!==null&&$[1]!==null){W=_<$[1]?"backward":"forward";let Ve=$[0]===$[1]&&$[0]<F;W==="backward"&&!Ve&&(de=-1)}D=de+_,R=de+_+1}}D!==-1&&R!==-1&&D!==R&&f.current.setSelectionRange(D,R,W)}let Ce=D!==-1?D:d,Ne=R!==-1?R:S,ze=W??P;Q(Ce),K(Ne),te.current.prev=[Ce,Ne,ze]}if(document.addEventListener("selectionchange",j,{capture:!0}),j(),document.activeElement===l&&ie(!0),!document.getElementById("input-otp-style")){let d=document.createElement("style");if(d.id="input-otp-style",document.head.appendChild(d),d.sheet){let S="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";X(d.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),X(d.sheet,`[data-input-otp]:autofill { ${S} }`),X(d.sheet,`[data-input-otp]:-webkit-autofill { ${S} }`),X(d.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),X(d.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let y=()=>{o&&o.style.setProperty("--root-height",`${l.clientHeight}px`)};y();let T=new ResizeObserver(y);return T.observe(l),()=>{document.removeEventListener("selectionchange",j,{capture:!0}),T.disconnect()}},[]);let[ge,je]=t.useState(!1),[U,ie]=t.useState(!1),[I,Q]=t.useState(null),[z,K]=t.useState(null);t.useEffect(()=>{wt(()=>{var l,o,j,y;(l=f.current)==null||l.dispatchEvent(new Event("input"));let T=(o=f.current)==null?void 0:o.selectionStart,d=(j=f.current)==null?void 0:j.selectionEnd,S=(y=f.current)==null?void 0:y.selectionDirection;T!==null&&d!==null&&(Q(T),K(d),te.current.prev=[T,d,S])})},[g,U]),t.useEffect(()=>{B!==void 0&&g!==B&&B.length<c&&g.length===c&&(N==null||N(g))},[c,N,B,g]);let G=Et({containerRef:se,inputRef:f,pushPasswordManagerStrategy:O,isFocused:U}),ve=t.useCallback(l=>{let o=l.currentTarget.value.slice(0,c);if(o.length>0&&E&&!E.test(o)){l.preventDefault();return}typeof B=="string"&&o.length<B.length&&document.dispatchEvent(new Event("selectionchange")),q(o)},[c,q,B,E]),be=t.useCallback(()=>{var l;if(f.current){let o=Math.min(f.current.value.length,c-1),j=f.current.value.length;(l=f.current)==null||l.setSelectionRange(o,j),Q(o),K(j)}ie(!0)},[c]),we=t.useCallback(l=>{var o,j;let y=f.current;if(!oe.current.isIOS||!l.clipboardData||!y)return;let T=l.clipboardData.getData("text/plain");l.preventDefault();let d=(o=f.current)==null?void 0:o.selectionStart,S=(j=f.current)==null?void 0:j.selectionEnd,P=(d!==S?g.slice(0,d)+T+g.slice(S):g.slice(0,d)+T+g.slice(d)).slice(0,c);if(P.length>0&&E&&!E.test(P))return;y.value=P,q(P);let F=Math.min(P.length,c-1),L=P.length;y.setSelectionRange(F,L),Q(F),K(L)},[c,q,E,g]),We=t.useMemo(()=>({position:"relative",cursor:i.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[i.disabled]),ye=t.useMemo(()=>({position:"absolute",inset:0,width:G.willPushPWMBadge?`calc(100% + ${G.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:G.willPushPWMBadge?`inset(0 ${G.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:p,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[G.PWM_BADGE_SPACE_WIDTH,G.willPushPWMBadge,p]),_e=t.useMemo(()=>t.createElement("input",jt(gt({autoComplete:i.autoComplete||"one-time-code"},i),{"data-input-otp":!0,"data-input-otp-mss":I,"data-input-otp-mse":z,inputMode:A,pattern:E==null?void 0:E.source,style:ye,maxLength:c,value:g,ref:f,onPaste:l=>{var o;we(l),(o=i.onPaste)==null||o.call(i,l)},onChange:ve,onMouseOver:l=>{var o;je(!0),(o=i.onMouseOver)==null||o.call(i,l)},onMouseLeave:l=>{var o;je(!1),(o=i.onMouseLeave)==null||o.call(i,l)},onFocus:l=>{var o;be(),(o=i.onFocus)==null||o.call(i,l)},onBlur:l=>{var o;ie(!1),(o=i.onBlur)==null||o.call(i,l)}})),[ve,be,we,A,ye,c,z,I,i,E==null?void 0:E.source,g]),ce=t.useMemo(()=>({slots:Array.from({length:c}).map((l,o)=>{let j=U&&I!==null&&z!==null&&(I===z&&o===I||o>=I&&o<z),y=g[o]!==void 0?g[o]:null;return{char:y,isActive:j,hasFakeCaret:j&&y===null}}),isFocused:U,isHovering:!i.disabled&&ge}),[U,ge,c,z,I,i.disabled,g]),He=t.useMemo(()=>x?x(ce):t.createElement(Re.Provider,{value:ce},h),[h,ce,x]);return t.createElement(t.Fragment,null,w!==null&&t.createElement("noscript",null,t.createElement("style",null,w)),t.createElement("div",{ref:se,"data-input-otp-container":!0,style:We,className:b},He,t.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},_e)))});Ae.displayName="Input";function X(a,n){try{a.insertRule(n)}catch{console.error("input-otp could not insert CSS rule:",n)}}var Mt=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const he=t.forwardRef(({className:a,containerClassName:n,...r},s)=>e.jsx(Ae,{ref:s,containerClassName:C("flex items-center gap-2 has-[:disabled]:opacity-50",n),className:C("disabled:cursor-not-allowed",a),...r}));he.displayName="InputOTP";const fe=t.forwardRef(({className:a,...n},r)=>e.jsx("div",{ref:r,className:C("flex items-center",a),...n}));fe.displayName="InputOTPGroup";const v=t.forwardRef(({index:a,className:n,...r},s)=>{const m=t.useContext(Re),{char:c,hasFakeCaret:p,isActive:u}=m.slots[a];return e.jsxs("div",{ref:s,className:C("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",u&&"z-10 ring-2 ring-ring ring-offset-background",n),...r,children:[c,p&&e.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:e.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})});v.displayName="InputOTPSlot";const Tt=t.forwardRef(({...a},n)=>e.jsx("div",{ref:n,role:"separator",...a,children:e.jsx(pt,{})}));Tt.displayName="InputOTPSeparator";const kt=({addMember:a})=>{const[n,r]=t.useState(!1),[s,m]=t.useState(),[c,p]=t.useState(!1),u=qe("(min-width: 768px)"),A=()=>{const x=new Uint32Array(1);crypto.getRandomValues(x);let h=Math.floor(1e5+x[0]/4294967296*9e5);m(i=>({...i,accessCode:String(h)}))},N=b=>{const{name:w,value:x}=b.target;m(h=>({...h,[w]:x}))},O=async b=>{if(b.preventDefault(),!(s!=null&&s.firstName)||!(s!=null&&s.lastName)||!(s!=null&&s.accessCode)){Y.error("Veuillez renseigner tous les champs.");return}p(!0);try{await a(s),r(!1)}catch(w){console.log(w),Y.error("Une erreur est survenue, veuillez contacter le support.")}p(!1)};return t.useEffect(()=>{n||m()},[n]),u?e.jsxs(Ue,{open:n,onOpenChange:r,children:[e.jsx(Qe,{asChild:!0,children:e.jsx(k,{variant:"link",className:"py-0",children:"Ajouter un membre"})}),e.jsxs(Ke,{className:"sm:max-w-[425px]",children:[e.jsxs(Xe,{children:[e.jsx(Ye,{children:"Ajouter un membre"}),e.jsx(Ze,{children:"Entrez les informations du nouveau membre."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx(V,{htmlFor:"name",children:"Prénom"}),e.jsx(ne,{name:"firstName",type:"text",placeholder:"Jean",onChange:N})]}),e.jsxs("div",{children:[e.jsx(V,{htmlFor:"name",children:"Nom"}),e.jsx(ne,{name:"lastName",type:"text",placeholder:"Dupont",onChange:N})]}),e.jsxs("div",{children:[e.jsx(V,{htmlFor:"name",children:"Code d'accès"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(he,{maxLength:6,value:(s==null?void 0:s.accessCode)||null,onChange:b=>m({...s,accessCode:b}),children:e.jsxs(fe,{children:[e.jsx(v,{index:0}),e.jsx(v,{index:1}),e.jsx(v,{index:2}),e.jsx(v,{index:3}),e.jsx(v,{index:4}),e.jsx(v,{index:5})]})}),e.jsx(k,{variant:"ghost",onClick:A,children:"Générer"})]})]})]}),e.jsx(et,{className:"sm:justify-start",children:e.jsx(tt,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(k,{variant:"outline",onClick:()=>m(),children:"Annuler"}),e.jsx(k,{onClick:O,disabled:c&&!0,children:c?e.jsx(Se,{className:"animate-spin"}):"Ajouter"})]})})})]})]}):e.jsxs(nt,{open:n,onOpenChange:r,children:[e.jsx(at,{asChild:!0,children:e.jsx(k,{variant:"link",className:"py-0",children:"Ajouter un membre"})}),e.jsxs(rt,{children:[e.jsxs(lt,{children:[e.jsx(st,{children:"Ajouter un membre"}),e.jsx(ot,{children:"Entrez les informations du nouveau membre."})]}),e.jsxs("div",{className:"flex flex-col px-4 gap-2",children:[e.jsxs("div",{children:[e.jsx(V,{htmlFor:"name",children:"Prénom"}),e.jsx(ne,{name:"firstName",type:"text",placeholder:"Jean",onChange:N})]}),e.jsxs("div",{children:[e.jsx(V,{htmlFor:"name",children:"Nom"}),e.jsx(ne,{name:"lastName",type:"text",placeholder:"Dupont",onChange:N})]}),e.jsxs("div",{children:[e.jsx(V,{htmlFor:"name",children:"Code d'accès"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(he,{maxLength:6,value:(s==null?void 0:s.accessCode)||null,onChange:b=>m({...s,accessCode:b}),children:e.jsxs(fe,{children:[e.jsx(v,{index:0}),e.jsx(v,{index:1}),e.jsx(v,{index:2}),e.jsx(v,{index:3}),e.jsx(v,{index:4}),e.jsx(v,{index:5})]})}),e.jsx(k,{variant:"ghost",onClick:A,children:"Générer"})]})]})]}),e.jsx(it,{className:"pt-2",children:e.jsx(ct,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(k,{className:"w-full",onClick:O,disabled:c&&!0,children:c?e.jsx(Se,{className:"animate-spin"}):"Ajouter"}),e.jsx(k,{className:"w-full",variant:"outline",onClick:()=>m(),children:"Annuler"})]})})})]})]})},Pt=kt,Oe=t.forwardRef(({className:a,...n},r)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:r,className:C("w-full caption-bottom text-sm",a),...n})}));Oe.displayName="Table";const Be=t.forwardRef(({className:a,...n},r)=>e.jsx("thead",{ref:r,className:C("[&_tr]:border-b",a),...n}));Be.displayName="TableHeader";const Ie=t.forwardRef(({className:a,...n},r)=>e.jsx("tbody",{ref:r,className:C("[&_tr:last-child]:border-0",a),...n}));Ie.displayName="TableBody";const Dt=t.forwardRef(({className:a,...n},r)=>e.jsx("tfoot",{ref:r,className:C("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...n}));Dt.displayName="TableFooter";const xe=t.forwardRef(({className:a,...n},r)=>e.jsx("tr",{ref:r,className:C("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...n}));xe.displayName="TableRow";const ae=t.forwardRef(({className:a,...n},r)=>e.jsx("th",{ref:r,className:C("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...n}));ae.displayName="TableHead";const re=t.forwardRef(({className:a,...n},r)=>e.jsx("td",{ref:r,className:C("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...n}));re.displayName="TableCell";const Rt=t.forwardRef(({className:a,...n},r)=>e.jsx("caption",{ref:r,className:C("mt-4 text-sm text-muted-foreground",a),...n}));Rt.displayName="TableCaption";function Wt(){const[a,n]=t.useState([]),[r,s]=t.useState(!0);t.useEffect(()=>{m()},[]);async function m(){var p;try{const{data:u}=await Ee.get("/api/salon/members");console.log(u),n(u)}catch(u){console.log(u),((p=u.response)==null?void 0:p.status)===401?navigate("/login",{state:{from:location},replace:!0}):Y.error(u.message)}finally{s(!1)}}async function c(p){try{await Ee.post("/api/salon",p),m(),Y.success("Membre ajouté avec succès.")}catch(u){Y.error(u.message)}}return e.jsxs("main",{className:"w-full max-w-screen-md mx-auto p-6 flex flex-1 flex-col gap-4",children:[e.jsx(dt,{children:e.jsxs(ut,{children:[e.jsx(me,{children:e.jsx(pe,{asChild:!0,children:e.jsx(ue,{to:"/",children:"Tableau de bord"})})}),e.jsx(Me,{}),e.jsx(me,{children:e.jsx(pe,{asChild:!0,children:e.jsx(ue,{to:"/salon",children:"Salon"})})}),e.jsx(Me,{}),e.jsx(me,{children:e.jsx(pe,{asChild:!0,children:e.jsx(ue,{to:"/salon/members",children:"Membres"})})})]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Mes membres"}),e.jsx(Pt,{addMember:c})]}),e.jsxs(Oe,{children:[e.jsx(Be,{children:e.jsxs(xe,{children:[e.jsx(ae,{className:"w-[100px]",children:"Nom"}),e.jsx(ae,{children:"Code d'accès"}),e.jsx(ae,{className:"w-[100px]"})]})}),e.jsx(Ie,{children:a.map(p=>e.jsxs(xe,{children:[e.jsxs(re,{className:"font-medium",children:[p.firstName," ",p.lastName]}),e.jsx(re,{children:p.accessCode}),e.jsx(re,{children:e.jsx(k,{variant:"ghost",children:e.jsx(mt,{})})})]},p.id))})]})]})}export{Wt as default};
