import{c as ge,r as c,j as e,B as n,I as N,p as D,J as v,a as O,C as ve,e as Ne,m as Ce,u as ye,L as Y}from"./index-Bl2J71mt.js";import{M as we}from"./ModalAction-NwBS3T6K.js";import{u as F,D as T,a as M,b as L,c as I,d as V,j as k,k as z,l as E,e as P,f as R,g as U,h as $,i as B,m as X,n as _,o as H}from"./drawer-D-nKjXOk.js";import{L as x}from"./label-Bh9BUQNH.js";import{T as J}from"./textarea-DZddz9Pg.js";import{c as le,a as se}from"./formatting-Cw3qGvmM.js";import{S as G,a as Q,b as q,c as K,d as W,e as A}from"./select-LWxUqSsO.js";import{A as be,a as Se,b as Ae,c as De}from"./accordion-BbIJlpcZ.js";import{C as Oe,B as ke,a as Fe,b as Z,c as ee,d as ae}from"./breadcrumb-D9DQq-N1.js";import{S as ce,a as de,P as Te,C as oe,I as me,b as xe,c as ue,R as he,L as pe,d as je}from"./index-Ctnxfunk.js";import{P as te,a as ie,b as re}from"./popover-Df_LEfGc.js";import{u as Me}from"./useAxiosPrivate-DMzzpoUa.js";import{E as ne}from"./ellipsis-vertical-BhrOi5lu.js";import"./axiosPrivate-DqHncTDW.js";import"./index-D3QsoVIf.js";import"./chevron-down-DZ_GVv6t.js";import"./index-Bosjy6JH.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=ge("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ie=({createCategory:a})=>{const[d,i]=c.useState(!1),[r,s]=c.useState(),[m,p]=c.useState(!1),[h,l]=c.useState(),S=F("(min-width: 768px)"),C=g=>{const{name:y,value:j}=g.target;s({[y]:j})},f=async g=>{if(g.preventDefault(),!(r!=null&&r.name)){l("Veuillez renseigner le nom de la catégorie.");return}p(!0);try{await a(r),i(!1)}catch{l("Une erreur est survenue, veuillez contacter le support.")}p(!1)};return c.useEffect(()=>{d||s()},[d]),S?e.jsxs(T,{open:d,onOpenChange:i,children:[e.jsx(M,{asChild:!0,children:e.jsx(n,{variant:"link",className:"py-0",children:"Ajouter une catégorie"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(I,{children:[e.jsx(V,{children:"Ajouter une catégorie"}),e.jsx(k,{children:"Définissez un nom pour ajouter une catégorie."})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(N,{id:"name",name:"name",type:"text",onChange:C})]})}),h&&setTimeout(()=>l(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:h}),e.jsx(z,{className:"sm:justify-start",children:e.jsx(E,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{variant:"outline",onClick:()=>s(),children:"Annuler"}),e.jsx(n,{onClick:f,disabled:m&&!0,children:m?e.jsx(D,{className:"animate-spin"}):"Ajouter"})]})})})]})]}):e.jsxs(P,{open:d,onOpenChange:i,children:[e.jsx(R,{asChild:!0,children:e.jsx(n,{variant:"link",className:"py-0",children:"Ajouter une catégorie"})}),e.jsxs(U,{children:[e.jsxs($,{children:[e.jsx(B,{children:"Ajouter une categorie"}),e.jsx(X,{children:"Définissez un nom pour ajouter une categorie."})]}),e.jsx("div",{className:"flex flex-col px-4 gap-2",children:e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(N,{id:"name",name:"name",type:"text",onChange:C})]})}),e.jsxs(_,{className:"pt-2",children:[h&&setTimeout(()=>l(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:h}),e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:f,disabled:m&&!0,children:m?e.jsx(D,{className:"animate-spin"}):"Ajouter"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>s(),children:"Annuler"})]})})]})]})]})},Ve=({providerCategoryId:a,createService:d})=>{const[i,r]=c.useState(!1),[s,m]=c.useState(),[p,h]=c.useState(!1),[l,S]=c.useState(),C=F("(min-width: 768px)"),f=y=>{const{name:j,value:w}=y.target,b=j==="price"||j==="deposit"?parseFloat(w):j==="duration"?parseFloat(le(w)):w;m({...s,[j]:b})},g=async y=>{if(y.preventDefault(),!(s!=null&&s.name)||!(s!=null&&s.price)||!(s!=null&&s.duration)){v.error("Veuillez renseigner tous les champs obligatoires."),S("border-destructive"),setTimeout(()=>S(null),4500);return}if(s.paymentOption==="DEPOSIT"&&!s.deposit){v.error("Veuillez renseigner l'acompte."),h(!1);return}if(s.deposit>s.price){v.error("Le montant de l'acompte ne peut pas être supérieur au prix.");return}h(!0);try{await d({providerCategoryId:a,...s}),r(!1)}catch{v.error("Une erreur est survenue, veuillez contacter le support.")}h(!1)};return c.useEffect(()=>{i||m()},[i]),C?e.jsxs(T,{open:i,onOpenChange:r,children:[e.jsx(M,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Ajouter une prestation"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(I,{children:[e.jsx(V,{children:"Ajouter une prestation"}),e.jsx(k,{children:"Définissez un nom, un prix et une durée pour ajouter une prestation."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(N,{id:"name",name:"name",type:"text",onChange:f,className:l})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{id:"price",name:"price",type:"number",onChange:f,className:l}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Option"}),e.jsxs(G,{onValueChange:y=>m({...s,paymentOption:y}),children:[e.jsx(Q,{children:e.jsx(q,{})}),e.jsx(K,{children:e.jsxs(W,{children:[e.jsx(A,{value:"DEFAULT",children:e.jsx("p",{className:"text-primary",children:"Par defaut"})}),e.jsx(A,{value:"ON_SITE",children:"Sur place"}),e.jsx(A,{value:"DEPOSIT",children:"Acompte"}),e.jsx(A,{value:"FULL",children:"Complet"})]})})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{id:"deposit",name:"deposit",type:"number",onChange:f}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(N,{id:"duration",name:"duration",type:"time",onChange:f,className:l})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(J,{id:"description",name:"description",className:"resize-none",onChange:f})]})]}),e.jsx(z,{className:"sm:justify-start",children:e.jsx(E,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{variant:"outline",onClick:()=>m(),children:"Annuler"}),e.jsx(n,{onClick:g,disabled:p&&!0,children:p?e.jsx(D,{className:"animate-spin"}):"Ajouter"})]})})})]})]}):e.jsxs(P,{open:i,onOpenChange:r,children:[e.jsx(R,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Ajouter une prestation"})}),e.jsxs(U,{children:[e.jsxs($,{children:[e.jsx(B,{children:"Ajouter une prestation"}),e.jsx(X,{children:"Définissez un nom, un prix et une durée pour ajouter une prestation."})]}),e.jsxs("div",{className:"flex flex-col px-4 gap-2",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(N,{id:"name",name:"name",type:"text",onChange:f,className:l})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{id:"price",name:"price",type:"number",onChange:f,className:l}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Option"}),e.jsxs(G,{onValueChange:y=>m({...s,paymentOption:y}),children:[e.jsx(Q,{children:e.jsx(q,{})}),e.jsx(K,{children:e.jsxs(W,{children:[e.jsx(A,{value:"DEFAULT",children:e.jsx("p",{className:"text-primary",children:"Par defaut"})}),e.jsx(A,{value:"ON_SITE",children:"Sur place"}),e.jsx(A,{value:"DEPOSIT",children:"Acompte"}),e.jsx(A,{value:"FULL",children:"Complet"})]})})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{id:"deposit",name:"deposit",type:"number",onChange:f}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(N,{id:"duration",name:"duration",type:"time",onChange:f,className:l})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(J,{id:"description",name:"description",className:"resize-none",onChange:f})]})]}),e.jsx(_,{className:"pt-2",children:e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:g,disabled:p&&!0,children:p?e.jsx(D,{className:"animate-spin"}):"Ajouter"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>m(),children:"Annuler"})]})})})]})]})},ze=({id:a,providerCategoryId:d,disableService:i})=>{const[r,s]=c.useState(!1),[m,p]=c.useState(!1),[h,l]=c.useState(),S=F("(min-width: 768px)"),C=async f=>{f.preventDefault(),p(!0);try{await i(a,d),s(!1)}catch{l("Une erreur est survenue, veuillez contacter le support.")}p(!1)};return S?e.jsxs(T,{open:r,onOpenChange:s,children:[e.jsx(M,{asChild:!0,children:e.jsx(n,{variant:"destructive",children:"Retirer la prestation"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(I,{children:[e.jsx(V,{className:"text-destructive",children:"Retirer la prestation"}),e.jsx(k,{children:"Êtes-vous sûr de vouloir retirer cette prestation ?"})]}),h&&setTimeout(()=>l(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:h}),e.jsx(z,{className:"sm:justify-start",children:e.jsx(E,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{variant:"outline",children:"Annuler"}),e.jsx(n,{onClick:C,variant:"destructive",disabled:m&&!0,children:m?e.jsx(D,{className:"animate-spin"}):"Retirer"})]})})})]})]}):e.jsxs(P,{open:r,onOpenChange:s,children:[e.jsx(R,{asChild:!0,children:e.jsx(n,{variant:"destructive",children:"Retirer la prestation"})}),e.jsxs(U,{children:[e.jsxs($,{children:[e.jsx(B,{className:"text-destructive",children:"Retirer la prestation"}),e.jsx(X,{children:"Êtes-vous sûr de vouloir retirer cette prestation ?"})]}),e.jsxs(_,{className:"pt-2",children:[h&&setTimeout(()=>l(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:h}),e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:C,variant:"destructive",disabled:m&&!0,children:m?e.jsx(D,{className:"animate-spin"}):"Retirer"}),e.jsx(n,{className:"w-full",variant:"outline",children:"Annuler"})]})})]})]})]})},Ee=({category:a,updateCategory:d})=>{const[i,r]=c.useState(!1),[s,m]=c.useState(),[p,h]=c.useState(!1),l=F("(min-width: 768px)"),S=async C=>{if(C.preventDefault(),h(!0),!(s!==a.name)){h(!1),r(!1),v("Aucun changement n'a été effectué.");return}try{await d(a.id,{name:s}),r(!1)}catch{v.error("Une erreur est survenue, veuillez contacter le support.")}h(!1)};return l?e.jsxs(T,{open:i,onOpenChange:r,children:[e.jsx(M,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la catégorie"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsx(I,{children:e.jsx(V,{children:"Modifier le nom de la catégorie"})}),e.jsxs(k,{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(N,{id:"name",name:"name",type:"text",defaultValue:a.name,onChange:C=>m(C.target.value)})]}),e.jsx(z,{className:"sm:justify-start",children:e.jsx(E,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{onClick:S,disabled:p&&!0,children:p?e.jsx(D,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{variant:"outline",onClick:()=>setCategory(),children:"Annuler"})]})})})]})]}):e.jsxs(P,{open:i,onOpenChange:r,children:[e.jsx(R,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la catégorie"})}),e.jsxs(U,{children:[e.jsx($,{children:e.jsx(B,{children:" Modifier le nom de la catégorie"})}),e.jsx(k,{children:e.jsxs("div",{className:"px-4",children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(N,{id:"name",name:"name",type:"text",defaultValue:a.name,onChange:C=>m(C.target.value)})]})}),e.jsx(_,{className:"pt-2",children:e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:S,disabled:p&&!0,children:p?e.jsx(D,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>setCategory(),children:"Annuler"})]})})})]})]})},Pe=({prevService:a,updateService:d})=>{const[i,r]=c.useState(!1),[s,m]=c.useState(),[p,h]=c.useState(!1),[l,S]=c.useState(),C=F("(min-width: 768px)"),f=j=>{const w=Math.floor(j/60),b=j%60,t=String(w).padStart(2,"0"),u=String(b).padStart(2,"0");return`${t}:${u}`},g=j=>{const{name:w,value:b}=j.target,t=w==="price"||w==="deposit"?parseFloat(b):w==="duration"?parseFloat(le(b)):b;m({...s,[w]:t})},y=async j=>{if(j.preventDefault(),h(!0),!(s!=null&&s.name)||!(s!=null&&s.price)||!(s!=null&&s.duration)){v.error("Veuillez renseigner tous les champs obligatoires."),S("border-destructive"),setTimeout(()=>S(null),4500),h(!1);return}if(s.paymentOption==="DEPOSIT"&&!s.deposit){v.error("Veuillez renseigner l'acompte."),h(!1);return}if(s.deposit>s.price){v.error("L'acompte ne peut pas être supérieur au prix."),h(!1);return}if(!Object.keys(s).some(b=>s[b]!==a[b])){h(!1),r(!1);return}try{await d(a.id,s),r(!1)}catch{v.error("Une erreur est survenue, veuillez contacter le support.")}h(!1)};return c.useEffect(()=>{const{name:j,price:w,deposit:b,paymentOption:t,duration:u,description:o}=a;i||m({name:j,price:w,deposit:b,paymentOption:t,duration:u,description:o})},[i]),C?e.jsxs(T,{open:i,onOpenChange:r,children:[e.jsx(M,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la prestation"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(I,{children:[e.jsx(V,{children:"Modifier la prestation"}),e.jsx(k,{children:"Modifiez les détails de la prestation."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(N,{id:"name",name:"name",type:"text",defaultValue:a.name,onChange:g,className:l})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{id:"price",name:"price",type:"number",defaultValue:a.price,onChange:g,className:l}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Option"}),e.jsxs(G,{onValueChange:j=>m({...s,paymentOption:j}),defaultValue:a.paymentOption,children:[e.jsx(Q,{children:e.jsx(q,{})}),e.jsx(K,{children:e.jsxs(W,{children:[e.jsx(A,{value:"ON_SITE",children:"Sur place"}),e.jsx(A,{value:"DEPOSIT",children:"Acompte"}),e.jsx(A,{value:"FULL",children:"Complet"})]})})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{id:"deposit",name:"deposit",type:"number",defaultValue:a.deposit,onChange:g}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(N,{id:"duration",name:"duration",type:"time",defaultValue:f(a.duration),onChange:g,className:l})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(J,{id:"description",name:"description",className:"resize-none",defaultValue:a.description,onChange:g})]})]}),e.jsx(z,{className:"sm:justify-start",children:e.jsx(E,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{onClick:y,disabled:p&&!0,children:p?e.jsx(D,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{variant:"outline",onClick:()=>m(),children:"Annuler"})]})})})]})]}):e.jsxs(P,{open:i,onOpenChange:r,children:[e.jsx(R,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la prestation"})}),e.jsxs(U,{children:[e.jsxs($,{children:[e.jsx(B,{children:" Modifier la prestation"}),e.jsx(X,{children:"Modifiez les détails de la prestation."})]}),e.jsxs("div",{className:"flex flex-col px-4 gap-2",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(N,{id:"name",name:"name",type:"text",defaultValue:a.name,onChange:g,className:l})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{id:"price",name:"price",type:"number",defaultValue:a.price,onChange:g,className:l}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(x,{children:"Option"}),e.jsxs(G,{onValueChange:j=>m({...s,paymentOption:j}),defaultValue:a.paymentOption,children:[e.jsx(Q,{children:e.jsx(q,{})}),e.jsx(K,{children:e.jsxs(W,{children:[e.jsx(A,{value:"ON_SITE",children:"Sur place"}),e.jsx(A,{value:"DEPOSIT",children:"Acompte"}),e.jsx(A,{value:"FULL",children:"Complet"})]})})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(N,{id:"deposit",name:"deposit",type:"number",defaultValue:a.deposit,onChange:g}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(N,{id:"duration",name:"duration",type:"time",onChange:g,defaultValue:f(a.duration),className:l})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(J,{id:"description",name:"description",className:"resize-none",defaultValue:a.description,onChange:g})]})]}),e.jsx(_,{className:"pt-2",children:e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:y,disabled:p&&!0,children:p?e.jsx(D,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>m(),children:"Annuler"})]})})})]})]})},Re=c.forwardRef(({className:a,inset:d,children:i,...r},s)=>e.jsxs(ce,{ref:s,className:O("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",d&&"pl-8",a),...r,children:[i,e.jsx(Oe,{className:"ml-auto h-4 w-4"})]}));Re.displayName=ce.displayName;const Ue=c.forwardRef(({className:a,...d},i)=>e.jsx(de,{ref:i,className:O("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d}));Ue.displayName=de.displayName;const $e=c.forwardRef(({className:a,sideOffset:d=4,...i},r)=>e.jsx(Te,{children:e.jsx(oe,{ref:r,sideOffset:d,className:O("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})}));$e.displayName=oe.displayName;const Be=c.forwardRef(({className:a,inset:d,...i},r)=>e.jsx(me,{ref:r,className:O("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",d&&"pl-8",a),...i}));Be.displayName=me.displayName;const _e=c.forwardRef(({className:a,children:d,checked:i,...r},s)=>e.jsxs(xe,{ref:s,className:O("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:i,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ue,{children:e.jsx(ve,{className:"h-4 w-4"})})}),d]}));_e.displayName=xe.displayName;const He=c.forwardRef(({className:a,children:d,...i},r)=>e.jsxs(he,{ref:r,className:O("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ue,{children:e.jsx(Le,{className:"h-2 w-2 fill-current"})})}),d]}));He.displayName=he.displayName;const Je=c.forwardRef(({className:a,inset:d,...i},r)=>e.jsx(pe,{ref:r,className:O("px-2 py-1.5 text-sm font-semibold",d&&"pl-8",a),...i}));Je.displayName=pe.displayName;const fe=c.forwardRef(({className:a,...d},i)=>e.jsx(je,{ref:i,className:O("-mx-1 my-1 h-px bg-muted",a),...d}));fe.displayName=je.displayName;const Ge={ON_SITE:"Sur place",DEPOSIT:"Acompte",FULL:"Complet"},os=()=>{const[a,d]=c.useState(),[i,r]=c.useState(!0),s=Me(),m=Ne(),p=Ce(),{auth:h}=ye();c.useEffect(()=>{l()},[]);async function l(){var t;try{const u=await s.get("/api/providerCategory/me");d(u.data)}catch(u){((t=u.response)==null?void 0:t.status)===401?m("/login",{state:{from:p},replace:!0}):v.error(u.message)}r(!1)}async function S(t){try{await s.post("/api/providerService",t),l()}catch(u){v.error(u.message)}}async function C(t){try{await s.post("/api/providerCategory",t),l()}catch(u){v.error(u.message)}}async function f(t){try{await s.put(`/api/providerService/${t}`,{isActive:!0}),l()}catch(u){v.error(u.message)}}async function g(t){try{await s.put(`/api/providerCategory/${t}`,{isActive:!0}),l()}catch(u){v.error(u.message)}}async function y(t,u){try{await s.put(`/api/providerService/${t}`,u),l(),v.success("Service mis à jour")}catch(o){v.error(o.message)}}async function j(t,u){try{await s.put(`/api/providerCategory/${t}`,u),l(),v.success("Catégorie mise à jour")}catch(o){v.error(o.message)}}async function w(t,u){try{await s.put(`/api/providerService/${t}`,{isActive:!1,providerCategoryId:u}),l()}catch(o){v.error(o.message)}}async function b(t){try{await s.put(`/api/providerCategory/${t}`,{isActive:!1}),l()}catch(u){v.error(u.message)}}return i?e.jsx(D,{className:"w-8 h-8 animate-spin flex-1"}):e.jsxs("main",{className:"w-full max-w-screen-md mx-auto p-6 flex flex-1 flex-col space-y-4",children:[e.jsx(ke,{children:e.jsxs(Fe,{children:[e.jsx(Z,{children:e.jsx(ee,{asChild:!0,children:e.jsx(Y,{to:"/",children:"Tableau de bord"})})}),e.jsx(ae,{}),e.jsx(Z,{children:e.jsx(ee,{asChild:!0,children:e.jsx(Y,{to:"/salon",children:"Salon"})})}),e.jsx(ae,{}),e.jsx(Z,{children:e.jsx(ee,{asChild:!0,children:e.jsx(Y,{to:"/salon/availabilities",children:"Prestations"})})})]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Mes prestations"}),e.jsx(Ie,{createCategory:C})]}),a==null?void 0:a.map((t,u)=>t.isActive&&e.jsx(be,{type:"single",collapsible:!0,defaultValue:"item-0",children:e.jsxs(Se,{value:`item-${u}`,className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ae,{children:e.jsx("h2",{className:"text-2xl font-medium text-left",children:t.name})}),e.jsx("div",{className:"space-x-2",children:e.jsxs(te,{children:[e.jsx(ie,{asChild:!0,children:e.jsx(n,{variant:"ghost",className:"ml-4",children:e.jsx(ne,{})})}),e.jsxs(re,{align:"end",className:"w-fit flex flex-col gap-2",children:[e.jsx(Ve,{providerCategoryId:t.id,createService:S}),e.jsx(fe,{}),e.jsx(Ee,{category:t,updateCategory:j}),e.jsx(we,{id:t.id,action:b,actionLabel:"Retirer",variant:"destructive",title:"Retirer la catégorie",description:"Toutes les prestations associées seront retirées.",trigger:"Retirer la catégorie",triggerVariant:"destructive"})]})]})})]}),e.jsx("ul",{className:"space-y-2",children:t.services.map(o=>o.isActive&&e.jsx(De,{children:e.jsxs("li",{className:"space-y-2 w-full rounded-md p-4 pt-2 pr-0 bg-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl",children:o.name}),e.jsxs(te,{children:[e.jsx(ie,{asChild:!0,children:e.jsx(n,{variant:"ghost",className:"ml-4",children:e.jsx(ne,{})})}),e.jsxs(re,{align:"end",className:"w-fit flex flex-col gap-2",children:[e.jsx(Pe,{prevService:o,updateService:y}),e.jsx(ze,{id:o.id,providerCategoryId:t.id,disableService:w})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"pr-4 line-clamp-2 text-muted",children:o.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between pr-4",children:[e.jsxs("div",{className:"flex gap-1 bg-primary text-white w-fit px-2 py-1 rounded",children:[e.jsxs("p",{children:[o.price,"€"]}),"•",e.jsx("p",{children:se(o.duration)})]}),e.jsxs("div",{className:"flex gap-1 bg-primary text-white w-fit px-2 py-1 rounded",children:[e.jsx("p",{children:Ge[o.paymentOption||h.defaultPaymentOption]}),o.paymentOption==="DEPOSIT"&&e.jsxs(e.Fragment,{children:["•",e.jsxs("p",{children:[o.deposit,"€"]})]})]})]})]})]})},o.id))})]})},t.id)),e.jsx("div",{className:"divider divider-start text-muted",children:"Inactives"}),a.map(t=>(t.services.some(o=>!o.isActive)||!t.isActive)&&e.jsxs("div",{className:"space-y-2 text-muted",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-medium",children:t.name}),!t.isActive&&e.jsx(n,{variant:"link",onClick:()=>g(t.id),children:"Activer la catégorie"})]}),e.jsx("ul",{className:"space-y-2",children:t.services.map(o=>(!o.isActive||!t.isActive)&&e.jsx("li",{className:"flex items-center justify-between gap-4",children:e.jsxs("div",{className:"w-full rounded-md p-4 bg-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{children:o.name}),t.isActive&&!o.isActive&&e.jsx(n,{variant:"link",onClick:()=>f(o.id),children:"Activer le service"}),!t.isActive&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{children:se(o.duration)}),e.jsx("div",{className:"divider divider-horizontal"}),e.jsxs("p",{children:[o.price,"€"]})]})]}),e.jsx("p",{children:o.description})]})},o.id))})]},t.id)),e.jsxs("p",{className:"text-sm text-muted",children:["La suppression des catégories et services est restreinte afin d'améliorer l'analyse de l'activité. ",e.jsx("br",{})," Pour supprimer définitivement une catégorie ou un service, veuillez"," ",e.jsxs(n,{variant:"link",className:"pl-0",children:[e.jsx("a",{href:"https://www.weconnect-rdv.fr/provider/cm13ksbde0000g98rx8rpbwte",target:"_blank",rel:"noreferrer noopener",children:"contacter le support"}),"."]})]})]})};export{os as default};
