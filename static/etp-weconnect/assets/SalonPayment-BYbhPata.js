import{r,u as N,j as e,I as p,B as v,p as y,L as n}from"./index-CsSoJ6X0.js";import{b as S}from"./axiosPrivate-BpYl2-FC.js";import{B as g,a as L,b as l,c as i,d as x}from"./breadcrumb-94bJw7rq.js";import{S as C,a as P,b as D,c as O,d as w,e as o}from"./select-D-okOJUR.js";import{L as u}from"./index-CMJxkJAR.js";import"./index-A9ihJOX9.js";import"./index-B-KJMQE5.js";import"./chevron-down-BQyis8tC.js";import"./index-BjRPUqAx.js";function M(){const[c,d]=r.useState(!1),{auth:s}=N(),[m,j]=r.useState(s==null?void 0:s.defaultDeposit),[a,f]=r.useState(s==null?void 0:s.defaultPaymentOption),h=async()=>{try{d(!0);const{data:t}=await S.post("/api/stripe/startOnboarding");window.open(t)}catch(t){console.error(t)}finally{d(!1)}},b=()=>{const t=m||s.defaultDeposit;return Math.round(50*(t/100))};return e.jsxs("main",{className:"w-full max-w-screen-md mx-auto p-6 flex flex-1 flex-col gap-4",children:[e.jsx(B,{}),e.jsx("h1",{className:"text-3xl font-semibold",children:"Mes paiements"}),s.stripeConnectedAccountId?e.jsxs("div",{children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"defaultDeposit",children:"Acompte par défaut"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(p,{id:"defaultDeposit",type:"number",defaultValue:s.defaultDeposit,onChange:t=>j(t.target.value),className:"w-fit"}),e.jsx("span",{children:"%"})]}),e.jsxs("p",{className:"text-muted text-sm",children:["L'acompte par défaut sera utilisé pour les prestations qui n'ont pas d'acompte spécifique configuré. ",e.jsx("br",{})," ",e.jsx("br",{}),e.jsx("span",{className:"font-semibold",children:"Exemple:"})," Pour une prestation à"," ",e.jsx("span",{className:"font-semibold text-primary",children:"50€"})," avec"," ",e.jsxs("span",{className:"font-semibold text-primary",children:[m,"%"]})," ","d'acompte, le client devra payer"," ",e.jsxs("span",{className:"font-semibold text-primary",children:[b(),"€"]})," ","à la réservation."]})]}),e.jsxs("div",{children:[e.jsx(u,{className:"mt-4",children:"Paiement par défault"}),e.jsxs(C,{id:"defaultPaymentOption",onValueChange:t=>f(t),defaultValue:s.defaultPaymentOption,children:[e.jsx(P,{className:"w-[180px]",children:e.jsx(D,{placeholder:s.defaultPaymentOption})}),e.jsx(O,{children:e.jsxs(w,{children:[e.jsx(o,{value:"ON_SITE",children:"Sur place"}),e.jsx(o,{value:"DEPOSIT",children:"Acompte"}),e.jsx(o,{value:"FULL",children:"Complet"})]})})]}),e.jsxs("p",{className:"text-muted text-sm",children:["Cette option de paiement par défaut sera utilisé pour les prestations qui n'ont pas d'option de paiement spécifique configuré. ",e.jsx("br",{})," ",e.jsx("br",{})]}),a==="ON_SITE"&&e.jsxs("p",{className:"text-muted text-sm",children:[e.jsx("span",{className:"font-semibold text-primary",children:"Sur place"})," : Aucun paiement ne sera demandé au client lors de la réservation."]}),a==="DEPOSIT"&&e.jsxs("p",{className:"text-muted text-sm",children:[e.jsx("span",{className:"font-semibold text-primary",children:"Acompte"})," : Un acompte sera demandé au client lors de la réservation."]}),a==="FULL"&&e.jsxs("p",{className:"text-muted text-sm",children:[e.jsx("span",{className:"font-semibold text-primary",children:"Complet"})," : Le client devra payer la totalité de la prestation lors de la réservation."]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsx(p,{disabled:!0,value:s.email,className:"w-fit"}),e.jsx(v,{onClick:h,className:"w-fit",disabled:c,children:c?e.jsx(y,{className:"animate-spin"}):"Créer un compte connecté"})]}),e.jsx("p",{className:"text-muted text-sm",children:"Créez un compte connecté avec l'email de votre salon pour mettre en place des paiements en ligne."})]})]})}const B=()=>e.jsx(g,{children:e.jsxs(L,{children:[e.jsx(l,{children:e.jsx(i,{asChild:!0,children:e.jsx(n,{to:"/",children:"Tableau de bord"})})}),e.jsx(x,{}),e.jsx(l,{children:e.jsx(i,{asChild:!0,children:e.jsx(n,{to:"/salon",children:"Salon"})})}),e.jsx(x,{}),e.jsx(l,{children:e.jsx(i,{asChild:!0,children:e.jsx(n,{to:"/salon/payment",children:"Paiements"})})})]})});export{M as default};
