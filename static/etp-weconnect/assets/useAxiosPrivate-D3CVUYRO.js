import{b as t}from"./axiosPrivate-BJu3kA8D.js";import{y as u,u as p,r as h}from"./index-DsRjEP5u.js";const f=()=>{const o=u(),{auth:n}=p();return h.useEffect(()=>{const c=t.interceptors.request.use(e=>(e.headers.Authorization||(e.headers.Authorization=`Bearer ${n==null?void 0:n.accessToken}`),e),e=>Promise.reject(e)),a=t.interceptors.response.use(e=>e,async e=>{var r;const s=e==null?void 0:e.config;if(((r=e==null?void 0:e.response)==null?void 0:r.status)===403&&!(s!=null&&s.sent)){s.sent=!0;const i=await o();return s.headers.Authorization=`Bearer ${i}`,t(s)}return Promise.reject(e)});return()=>{t.interceptors.request.eject(c),t.interceptors.response.eject(a)}},[n,o]),t},x=f;export{x as u};
