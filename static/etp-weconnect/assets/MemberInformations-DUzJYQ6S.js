import{r,s as M,m as w,e as E,j as e,L as i,B as g,p as S,J as $}from"./index-DcugkPC_.js";import{b as c}from"./axiosPrivate-DKatnhxZ.js";import{E as d}from"./EditableInput-BJdEkLwy.js";import{M as I}from"./ModalAction-CowdjVfL.js";import{B as k,a as R,b as l,c as n,d as u}from"./breadcrumb-B8aUs7HV.js";import"./label-BEDWncpw.js";import"./drawer-BN1iXKWN.js";function T(){const[s,N]=r.useState(null),[b,m]=r.useState(null),[x,f]=r.useState(!1),{id:o}=M(),y=w(),p=E();r.useEffect(()=>{h()},[]);async function h(){var t;try{const{data:a}=await c.get(`/api/salon/members/${o}`);N(a)}catch(a){console.error(a),((t=a.response)==null?void 0:t.status)===401&&p("/login",{state:{from:y},replace:!0})}}const j=t=>{const{id:a,value:L}=t.target;m(B=>({...B,[a]:L}))},v=async t=>{t.preventDefault(),f(!0);try{await c.patch(`/api/salon/members/${o}`,b),h(),$.success("Les informations du membre ont été mises à jour.")}catch(a){console.error(a)}finally{f(!1)}},C=async t=>{try{await c.delete(`/api/salon/members/${t}`),p("/salon/members")}catch(a){console.error(a)}};return e.jsxs("main",{className:"w-full h-full max-w-screen-md mx-auto p-6 flex flex-1 flex-col gap-4",children:[e.jsx(k,{children:e.jsxs(R,{children:[e.jsx(l,{children:e.jsx(n,{asChild:!0,children:e.jsx(i,{to:"/",children:"Tableau de bord"})})}),e.jsx(u,{}),e.jsx(l,{children:e.jsx(n,{asChild:!0,children:e.jsx(i,{to:"/salon",children:"Salon"})})}),e.jsx(u,{}),e.jsx(l,{children:e.jsx(n,{asChild:!0,children:e.jsx(i,{to:"/salon/members",children:"Membres"})})}),e.jsx(u,{}),e.jsx(l,{children:e.jsx(n,{asChild:!0,children:e.jsxs(i,{to:`/salon/members/${o}/informations`,children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]})})})]})}),e.jsxs("h1",{className:"text-3xl font-semibold",children:[s==null?void 0:s.firstName," ",s==null?void 0:s.lastName]}),e.jsx("p",{className:"text-muted",children:"Gérez les informations du membre."}),e.jsxs("form",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2 md:space-y-0 md:grid grid-cols-2 md:gap-4",children:[e.jsx(d,{id:"firstName",label:"Prénom",type:"text",defaultValue:s==null?void 0:s.firstName,handleChange:j}),e.jsx(d,{id:"lastName",label:"Nom",type:"text",defaultValue:s==null?void 0:s.lastName,handleChange:j}),e.jsx(d,{id:"accessCode",label:"Code d'accès",type:"text",defaultValue:s==null?void 0:s.accessCode,disabled:!0})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{onClick:v,disabled:x,children:x?e.jsx(S,{className:"animate-spin"}):"Enregistrer les modifications"}),e.jsx(g,{variant:"outline",type:"reset",onClick:()=>{m(),setshowActionButtons(!1)},children:"Annuler"})]})]}),e.jsx("div",{className:"mt-auto",children:e.jsx(I,{id:s==null?void 0:s.id,action:C,actionLabel:"Retirer le membre",variant:"destructive",title:"Retirer du salon",description:"Le membre sera retiré du salon et ne pourra plus accéder à l'application.",trigger:"Retirer le membre",triggerVariant:"destructive",successMessage:`${s==null?void 0:s.firstName} ${s==null?void 0:s.lastName} a été retiré du salon.`})})]})}export{T as default};
