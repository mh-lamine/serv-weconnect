import{c as ue,r as c,j as e,B as n,I as v,n as D,J as C,a as S,C as xe,e as he,m as pe,u as je,L as _}from"./index-DsRjEP5u.js";import{M as fe}from"./ModalAction-EaonBwEY.js";import{u as M,D as F,a as z,b as R,c as V,d as I,j as k,k as T,l as L,e as O,f as P,g as E,h as $,i as B,m as Q,n as U,o as H}from"./drawer-bOwZBRBG.js";import{L as x}from"./label-DWpel6bx.js";import{T as J}from"./textarea-BKjwHfsf.js";import{c as se,a as K}from"./formatting-Cw3qGvmM.js";import{A as ve,a as ge,b as Ne,c as Ce}from"./accordion-Ca0GTAWd.js";import{C as ye,B as we,a as be,b as q,c as G,d as W}from"./breadcrumb-G8to83iC.js";import{S as ae,a as te,P as Ae,C as ie,I as re,b as ne,c as le,R as ce,L as de,d as oe}from"./index-fOo1QmY_.js";import{P as X,a as Y,b as Z}from"./popover-DHCoaLGr.js";import{u as De}from"./useAxiosPrivate-D3CVUYRO.js";import{E as ee}from"./ellipsis-vertical-VOiy34Vw.js";import"./axiosPrivate-BJu3kA8D.js";import"./index-8sXXxvk9.js";import"./chevron-down-DZ-f0AKS.js";import"./index-Cz_nR-Iv.js";import"./index-B8m83hYI.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=ue("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ke=({createCategory:a})=>{const[d,i]=c.useState(!1),[r,s]=c.useState(),[u,p]=c.useState(!1),[h,l]=c.useState(),y=M("(min-width: 768px)"),N=f=>{const{name:A,value:g}=f.target;s({[A]:g})},j=async f=>{if(f.preventDefault(),!(r!=null&&r.name)){l("Veuillez renseigner le nom de la catégorie.");return}p(!0);try{await a(r),i(!1)}catch{l("Une erreur est survenue, veuillez contacter le support.")}p(!1)};return c.useEffect(()=>{d||s()},[d]),y?e.jsxs(F,{open:d,onOpenChange:i,children:[e.jsx(z,{asChild:!0,children:e.jsx(n,{variant:"link",className:"py-0",children:"Ajouter une catégorie"})}),e.jsxs(R,{className:"sm:max-w-[425px]",children:[e.jsxs(V,{children:[e.jsx(I,{children:"Ajouter une catégorie"}),e.jsx(k,{children:"Définissez un nom pour ajouter une catégorie."})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(v,{id:"name",name:"name",type:"text",onChange:N})]})}),h&&setTimeout(()=>l(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:h}),e.jsx(T,{className:"sm:justify-start",children:e.jsx(L,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{variant:"outline",onClick:()=>s(),children:"Annuler"}),e.jsx(n,{onClick:j,disabled:u&&!0,children:u?e.jsx(D,{className:"animate-spin"}):"Ajouter"})]})})})]})]}):e.jsxs(O,{open:d,onOpenChange:i,children:[e.jsx(P,{asChild:!0,children:e.jsx(n,{variant:"link",className:"py-0",children:"Ajouter une catégorie"})}),e.jsxs(E,{children:[e.jsxs($,{children:[e.jsx(B,{children:"Ajouter une categorie"}),e.jsx(Q,{children:"Définissez un nom pour ajouter une categorie."})]}),e.jsx("div",{className:"flex flex-col px-4 gap-2",children:e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(v,{id:"name",name:"name",type:"text",onChange:N})]})}),e.jsxs(U,{className:"pt-2",children:[h&&setTimeout(()=>l(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:h}),e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:j,disabled:u&&!0,children:u?e.jsx(D,{className:"animate-spin"}):"Ajouter"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>s(),children:"Annuler"})]})})]})]})]})},Me=({providerCategoryId:a,createService:d})=>{const[i,r]=c.useState(!1),[s,u]=c.useState(),[p,h]=c.useState(!1),[l,y]=c.useState(),N=M("(min-width: 768px)"),j=A=>{const{name:g,value:w}=A.target,b=g==="price"||g==="deposit"?parseFloat(w):g==="duration"?parseFloat(se(w)):w;u({...s,[g]:b})},f=async A=>{if(A.preventDefault(),!(s!=null&&s.name)||!(s!=null&&s.price)||!(s!=null&&s.duration)){C.error("Veuillez renseigner tous les champs obligatoires."),y("border-destructive"),setTimeout(()=>y(null),4500);return}h(!0);try{await d({providerCategoryId:a,...s}),r(!1)}catch{C.error("Une erreur est survenue, veuillez contacter le support.")}h(!1)};return c.useEffect(()=>{i||u()},[i]),N?e.jsxs(F,{open:i,onOpenChange:r,children:[e.jsx(z,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Ajouter une prestation"})}),e.jsxs(R,{className:"sm:max-w-[425px]",children:[e.jsxs(V,{children:[e.jsx(I,{children:"Ajouter une prestation"}),e.jsx(k,{children:"Définissez un nom, un prix et une durée pour ajouter une prestation."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(v,{id:"name",name:"name",type:"text",onChange:j,className:l})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(v,{id:"price",name:"price",type:"number",onChange:j,className:l}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(v,{id:"deposit",name:"deposit",type:"number",onChange:j}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(v,{id:"duration",name:"duration",type:"time",defaultValue:"01:30",onChange:j,className:l})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(J,{id:"description",name:"description",className:"resize-none",onChange:j})]})]}),e.jsx(T,{className:"sm:justify-start",children:e.jsx(L,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{variant:"outline",onClick:()=>u(),children:"Annuler"}),e.jsx(n,{onClick:f,disabled:p&&!0,children:p?e.jsx(D,{className:"animate-spin"}):"Ajouter"})]})})})]})]}):e.jsxs(O,{open:i,onOpenChange:r,children:[e.jsx(P,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Ajouter une prestation"})}),e.jsxs(E,{children:[e.jsxs($,{children:[e.jsx(B,{children:"Ajouter une prestation"}),e.jsx(Q,{children:"Définissez un nom, un prix et une durée pour ajouter une prestation."})]}),e.jsxs("div",{className:"flex flex-col px-4 gap-2",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(v,{id:"name",name:"name",type:"text",onChange:j,className:l})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(v,{id:"price",name:"price",type:"number",onChange:j,className:l}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(v,{id:"deposit",name:"deposit",type:"number",onChange:j}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(v,{id:"duration",name:"duration",type:"time",defaultValue:"01:30",onChange:j,className:l})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(J,{id:"description",name:"description",className:"resize-none",onChange:j})]})]}),e.jsx(U,{className:"pt-2",children:e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:f,disabled:p&&!0,children:p?e.jsx(D,{className:"animate-spin"}):"Ajouter"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>u(),children:"Annuler"})]})})})]})]})},Fe=({id:a,providerCategoryId:d,disableService:i})=>{const[r,s]=c.useState(!1),[u,p]=c.useState(!1),[h,l]=c.useState(),y=M("(min-width: 768px)"),N=async j=>{j.preventDefault(),p(!0);try{await i(a,d),s(!1)}catch{l("Une erreur est survenue, veuillez contacter le support.")}p(!1)};return y?e.jsxs(F,{open:r,onOpenChange:s,children:[e.jsx(z,{asChild:!0,children:e.jsx(n,{variant:"destructive",children:"Retirer la prestation"})}),e.jsxs(R,{className:"sm:max-w-[425px]",children:[e.jsxs(V,{children:[e.jsx(I,{className:"text-destructive",children:"Retirer la prestation"}),e.jsx(k,{children:"Êtes-vous sûr de vouloir retirer cette prestation ?"})]}),h&&setTimeout(()=>l(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:h}),e.jsx(T,{className:"sm:justify-start",children:e.jsx(L,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{variant:"outline",children:"Annuler"}),e.jsx(n,{onClick:N,variant:"destructive",disabled:u&&!0,children:u?e.jsx(D,{className:"animate-spin"}):"Retirer"})]})})})]})]}):e.jsxs(O,{open:r,onOpenChange:s,children:[e.jsx(P,{asChild:!0,children:e.jsx(n,{variant:"destructive",children:"Retirer la prestation"})}),e.jsxs(E,{children:[e.jsxs($,{children:[e.jsx(B,{className:"text-destructive",children:"Retirer la prestation"}),e.jsx(Q,{children:"Êtes-vous sûr de vouloir retirer cette prestation ?"})]}),e.jsxs(U,{className:"pt-2",children:[h&&setTimeout(()=>l(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:h}),e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:N,variant:"destructive",disabled:u&&!0,children:u?e.jsx(D,{className:"animate-spin"}):"Retirer"}),e.jsx(n,{className:"w-full",variant:"outline",children:"Annuler"})]})})]})]})]})},ze=({category:a,updateCategory:d})=>{const[i,r]=c.useState(!1),[s,u]=c.useState(),[p,h]=c.useState(!1),l=M("(min-width: 768px)"),y=async N=>{if(N.preventDefault(),h(!0),!(s!==a.name)){h(!1),r(!1),C("Aucun changement n'a été effectué.");return}try{await d(a.id,{name:s}),r(!1)}catch{C.error("Une erreur est survenue, veuillez contacter le support.")}h(!1)};return l?e.jsxs(F,{open:i,onOpenChange:r,children:[e.jsx(z,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la catégorie"})}),e.jsxs(R,{className:"sm:max-w-[425px]",children:[e.jsx(V,{children:e.jsx(I,{children:"Modifier le nom de la catégorie"})}),e.jsxs(k,{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(v,{id:"name",name:"name",type:"text",defaultValue:a.name,onChange:N=>u(N.target.value)})]}),e.jsx(T,{className:"sm:justify-start",children:e.jsx(L,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{onClick:y,disabled:p&&!0,children:p?e.jsx(D,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{variant:"outline",onClick:()=>setCategory(),children:"Annuler"})]})})})]})]}):e.jsxs(O,{open:i,onOpenChange:r,children:[e.jsx(P,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la catégorie"})}),e.jsxs(E,{children:[e.jsx($,{children:e.jsx(B,{children:" Modifier le nom de la catégorie"})}),e.jsx(k,{children:e.jsxs("div",{className:"px-4",children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(v,{id:"name",name:"name",type:"text",defaultValue:a.name,onChange:N=>u(N.target.value)})]})}),e.jsx(U,{className:"pt-2",children:e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:y,disabled:p&&!0,children:p?e.jsx(D,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>setCategory(),children:"Annuler"})]})})})]})]})},Re=({prevService:a,updateService:d})=>{const[i,r]=c.useState(!1),[s,u]=c.useState(),[p,h]=c.useState(!1),[l,y]=c.useState(),N=M("(min-width: 768px)"),j=g=>{const w=Math.floor(g/60),b=g%60,t=String(w).padStart(2,"0"),o=String(b).padStart(2,"0");return`${t}:${o}`},f=g=>{const{name:w,value:b}=g.target,t=w==="price"||w==="deposit"?parseFloat(b):w==="duration"?parseFloat(se(b)):b;u({...s,[w]:t})},A=async g=>{if(g.preventDefault(),h(!0),!(s!=null&&s.name)||!(s!=null&&s.price)||!(s!=null&&s.duration)){C.error("Veuillez renseigner tous les champs obligatoires."),y("border-destructive"),setTimeout(()=>y(null),4500),h(!1);return}if(!Object.keys(s).some(b=>s[b]!==a[b])){h(!1),r(!1);return}try{await d(a.id,s),r(!1)}catch{y("Une erreur est survenue, veuillez contacter le support.")}h(!1)};return c.useEffect(()=>{const{name:g,price:w,duration:b,description:t}=a;i||u({name:g,price:w,duration:b,description:t})},[i]),N?e.jsxs(F,{open:i,onOpenChange:r,children:[e.jsx(z,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la prestation"})}),e.jsxs(R,{className:"sm:max-w-[425px]",children:[e.jsxs(V,{children:[e.jsx(I,{children:"Modifier la prestation"}),e.jsx(k,{children:"Modifiez les détails de la prestation."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(v,{id:"name",name:"name",type:"text",defaultValue:a.name,onChange:f,className:l})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(v,{id:"price",name:"price",type:"number",onChange:f,defaultValue:a.price,className:l}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(v,{id:"deposit",name:"deposit",type:"number",onChange:f,defaultValue:a.deposit}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(v,{id:"duration",name:"duration",type:"time",defaultValue:j(a.duration),onChange:f,className:l})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(J,{id:"description",name:"description",className:"resize-none",defaultValue:a.description,onChange:f})]})]}),e.jsx(T,{className:"sm:justify-start",children:e.jsx(L,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{onClick:A,disabled:p&&!0,children:p?e.jsx(D,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{variant:"outline",onClick:()=>u(),children:"Annuler"})]})})})]})]}):e.jsxs(O,{open:i,onOpenChange:r,children:[e.jsx(P,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la prestation"})}),e.jsxs(E,{children:[e.jsxs($,{children:[e.jsx(B,{children:" Modifier la prestation"}),e.jsx(Q,{children:"Modifiez les détails de la prestation."})]}),e.jsxs("div",{className:"flex flex-col px-4 gap-2",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"name",children:"Nom"}),e.jsx(v,{id:"name",name:"name",type:"text",defaultValue:a.name,onChange:f,className:l})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(x,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(v,{id:"price",name:"price",type:"number",onChange:f,defaultValue:a.price,className:l}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(v,{id:"deposit",name:"deposit",type:"number",onChange:f,defaultValue:a.deposit}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(v,{id:"duration",name:"duration",type:"time",onChange:f,defaultValue:j(a.duration),className:l})]}),e.jsxs("div",{children:[e.jsx(x,{htmlFor:"description",children:"Description"}),e.jsx(J,{id:"description",name:"description",className:"resize-none",defaultValue:a.description,onChange:f})]})]}),e.jsx(U,{className:"pt-2",children:e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:A,disabled:p&&!0,children:p?e.jsx(D,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>u(),children:"Annuler"})]})})})]})]})},Ve=c.forwardRef(({className:a,inset:d,children:i,...r},s)=>e.jsxs(ae,{ref:s,className:S("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",d&&"pl-8",a),...r,children:[i,e.jsx(ye,{className:"ml-auto h-4 w-4"})]}));Ve.displayName=ae.displayName;const Ie=c.forwardRef(({className:a,...d},i)=>e.jsx(te,{ref:i,className:S("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d}));Ie.displayName=te.displayName;const Te=c.forwardRef(({className:a,sideOffset:d=4,...i},r)=>e.jsx(Ae,{children:e.jsx(ie,{ref:r,sideOffset:d,className:S("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})}));Te.displayName=ie.displayName;const Le=c.forwardRef(({className:a,inset:d,...i},r)=>e.jsx(re,{ref:r,className:S("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",d&&"pl-8",a),...i}));Le.displayName=re.displayName;const Oe=c.forwardRef(({className:a,children:d,checked:i,...r},s)=>e.jsxs(ne,{ref:s,className:S("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:i,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(le,{children:e.jsx(xe,{className:"h-4 w-4"})})}),d]}));Oe.displayName=ne.displayName;const Pe=c.forwardRef(({className:a,children:d,...i},r)=>e.jsxs(ce,{ref:r,className:S("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(le,{children:e.jsx(Se,{className:"h-2 w-2 fill-current"})})}),d]}));Pe.displayName=ce.displayName;const Ee=c.forwardRef(({className:a,inset:d,...i},r)=>e.jsx(de,{ref:r,className:S("px-2 py-1.5 text-sm font-semibold",d&&"pl-8",a),...i}));Ee.displayName=de.displayName;const me=c.forwardRef(({className:a,...d},i)=>e.jsx(oe,{ref:i,className:S("-mx-1 my-1 h-px bg-muted",a),...d}));me.displayName=oe.displayName;const ts=()=>{const[a,d]=c.useState(),[i,r]=c.useState(!0),s=De(),u=he(),p=pe(),{auth:h}=je();c.useEffect(()=>{l()},[]);async function l(){var t;try{const o=await s.get("/api/providerCategory/me");d(o.data)}catch(o){((t=o.response)==null?void 0:t.status)===401?u("/login",{state:{from:p},replace:!0}):C.error(o.message)}r(!1)}async function y(t){try{await s.post("/api/providerService",{service:t,stripeAccountId:h.stripeConnectedAccountId}),l()}catch(o){C.error(o.message)}}async function N(t){try{await s.post("/api/providerCategory",t),l()}catch(o){C.error(o.message)}}async function j(t){try{await s.put(`/api/providerService/${t}`,{isActive:!0}),l()}catch(o){C.error(o.message)}}async function f(t){try{await s.put(`/api/providerCategory/${t}`,{isActive:!0}),l()}catch(o){C.error(o.message)}}async function A(t,o){try{await s.put(`/api/providerService/${t}`,o),l(),C.success("Service mis à jour")}catch(m){C.error(m.message)}}async function g(t,o){try{await s.put(`/api/providerCategory/${t}`,o),l(),C.success("Catégorie mise à jour")}catch(m){C.error(m.message)}}async function w(t,o){try{await s.put(`/api/providerService/${t}`,{isActive:!1,providerCategoryId:o}),l()}catch(m){C.error(m.message)}}async function b(t){try{await s.put(`/api/providerCategory/${t}`,{isActive:!1}),l()}catch(o){C.error(o.message)}}return i?e.jsx(D,{className:"w-8 h-8 animate-spin flex-1"}):e.jsxs("main",{className:"w-full max-w-screen-md mx-auto p-6 flex flex-1 flex-col space-y-4",children:[e.jsx(we,{children:e.jsxs(be,{children:[e.jsx(q,{children:e.jsx(G,{asChild:!0,children:e.jsx(_,{to:"/",children:"Tableau de bord"})})}),e.jsx(W,{}),e.jsx(q,{children:e.jsx(G,{asChild:!0,children:e.jsx(_,{to:"/salon",children:"Salon"})})}),e.jsx(W,{}),e.jsx(q,{children:e.jsx(G,{asChild:!0,children:e.jsx(_,{to:"/salon/availabilities",children:"Prestations"})})})]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Mes prestations"}),e.jsx(ke,{createCategory:N})]}),a==null?void 0:a.map((t,o)=>t.isActive&&e.jsx(ve,{type:"single",collapsible:!0,defaultValue:"item-0",children:e.jsxs(ge,{value:`item-${o}`,className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ne,{children:e.jsx("h2",{className:"text-2xl font-medium text-left",children:t.name})}),e.jsx("div",{className:"space-x-2",children:e.jsxs(X,{children:[e.jsx(Y,{asChild:!0,children:e.jsx(n,{variant:"ghost",className:"ml-4",children:e.jsx(ee,{})})}),e.jsxs(Z,{align:"end",className:"w-fit flex flex-col gap-2",children:[e.jsx(Me,{providerCategoryId:t.id,createService:y}),e.jsx(me,{}),e.jsx(ze,{category:t,updateCategory:g}),e.jsx(fe,{id:t.id,action:b,actionLabel:"Retirer",variant:"destructive",title:"Retirer la catégorie",description:"Toutes les prestations associées seront retirées.",trigger:"Retirer la catégorie",triggerVariant:"destructive"})]})]})})]}),e.jsx("ul",{className:"space-y-2",children:t.services.map(m=>m.isActive&&e.jsx(Ce,{children:e.jsxs("li",{className:"flex items-start justify-between gap-10 w-full rounded-md p-4 pr-0 bg-gray-100",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl",children:m.name}),e.jsx("p",{children:m.description})]}),e.jsxs("div",{className:"flex flex-col-reverse gap-2 items-center md:flex-row md:gap-0",children:[e.jsx("p",{children:K(m.duration)}),e.jsx("div",{className:"divider divider-horizontal"}),e.jsxs("p",{children:[m.price,"€"]}),e.jsxs(X,{children:[e.jsx(Y,{asChild:!0,children:e.jsx(n,{variant:"ghost",className:"ml-4",children:e.jsx(ee,{})})}),e.jsxs(Z,{align:"end",className:"w-fit flex flex-col gap-2",children:[e.jsx(Re,{prevService:m,updateService:A}),e.jsx(Fe,{id:m.id,providerCategoryId:t.id,disableService:w})]})]})]})]})},m.id))})]})},t.id)),e.jsx("div",{className:"divider divider-start text-muted",children:"Inactives"}),a.map(t=>(t.services.some(m=>!m.isActive)||!t.isActive)&&e.jsxs("div",{className:"space-y-2 text-muted",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-medium",children:t.name}),!t.isActive&&e.jsx(n,{variant:"link",onClick:()=>f(t.id),children:"Activer la catégorie"})]}),e.jsx("ul",{className:"space-y-2",children:t.services.map(m=>(!m.isActive||!t.isActive)&&e.jsx("li",{className:"flex items-center justify-between gap-4",children:e.jsxs("div",{className:"w-full rounded-md p-4 bg-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{children:m.name}),t.isActive&&!m.isActive&&e.jsx(n,{variant:"link",onClick:()=>j(m.id),children:"Activer le service"}),!t.isActive&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{children:K(m.duration)}),e.jsx("div",{className:"divider divider-horizontal"}),e.jsxs("p",{children:[m.price,"€"]})]})]}),e.jsx("p",{children:m.description})]})},m.id))})]},t.id)),e.jsxs("p",{className:"text-sm text-muted",children:["La suppression des catégories et services est restreinte afin d'améliorer l'analyse de l'activité. ",e.jsx("br",{})," Pour supprimer définitivement une catégorie ou un service, veuillez"," ",e.jsxs(n,{variant:"link",className:"pl-0",children:[e.jsx("a",{href:"https://www.weconnect-rdv.fr/provider/cm13ksbde0000g98rx8rpbwte",target:"_blank",rel:"noreferrer noopener",children:"contacter le support"}),"."]})]})]})};export{ts as default};
