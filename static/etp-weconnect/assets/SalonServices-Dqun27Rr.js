import{c as ge,r as c,j as e,B as n,I as g,p as A,J as N,a as D,C as ve,e as Ne,m as Ce,u as ye,L as Q}from"./index-DG3ZKRd7.js";import{M as we}from"./ModalAction-DhLVlSfY.js";import{u as F,D as T,a as I,b as L,c as z,d as O,j as M,k as V,l as R,e as E,f as P,g as U,h as $,i as B,m as G,n as H,o as _}from"./drawer-CfzwxYWk.js";import{L as m}from"./label-aFN8b43M.js";import{T as J}from"./textarea-BuxMvl-Z.js";import{c as le,a as W}from"./formatting-Cw3qGvmM.js";import{S as X,a as Y,b as Z,c as ee,d as se,e as k}from"./select-DJLN_PM5.js";import{A as be,a as Se,b as Ae,c as De}from"./accordion-Y2phLNCm.js";import{C as ke,B as Me,a as Fe,b as q,c as K,d as ae}from"./breadcrumb-DoB06NST.js";import{S as ce,a as de,P as Te,C as oe,I as me,b as ue,c as xe,R as he,L as pe,d as je}from"./index-FTg6fvsP.js";import{P as te,a as ie,b as re}from"./popover-BFL4Jw5h.js";import{u as Ie}from"./useAxiosPrivate-CYRn2wTG.js";import{E as ne}from"./ellipsis-vertical-ice_zhRp.js";import"./axiosPrivate-Dj7GHsej.js";import"./index-Do8jreQN.js";import"./index-B2cLJ-g4.js";import"./chevron-down-DDZ7n4MB.js";import"./index-DEYyPb0L.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=ge("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ze=({createCategory:a})=>{const[d,i]=c.useState(!1),[r,s]=c.useState(),[x,p]=c.useState(!1),[h,l]=c.useState(),y=F("(min-width: 768px)"),C=f=>{const{name:S,value:v}=f.target;s({[S]:v})},j=async f=>{if(f.preventDefault(),!(r!=null&&r.name)){l("Veuillez renseigner le nom de la catégorie.");return}p(!0);try{await a(r),i(!1)}catch{l("Une erreur est survenue, veuillez contacter le support.")}p(!1)};return c.useEffect(()=>{d||s()},[d]),y?e.jsxs(T,{open:d,onOpenChange:i,children:[e.jsx(I,{asChild:!0,children:e.jsx(n,{variant:"link",className:"py-0",children:"Ajouter une catégorie"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(z,{children:[e.jsx(O,{children:"Ajouter une catégorie"}),e.jsx(M,{children:"Définissez un nom pour ajouter une catégorie."})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",onChange:C})]})}),h&&setTimeout(()=>l(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:h}),e.jsx(V,{className:"sm:justify-start",children:e.jsx(R,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{variant:"outline",onClick:()=>s(),children:"Annuler"}),e.jsx(n,{onClick:j,disabled:x&&!0,children:x?e.jsx(A,{className:"animate-spin"}):"Ajouter"})]})})})]})]}):e.jsxs(E,{open:d,onOpenChange:i,children:[e.jsx(P,{asChild:!0,children:e.jsx(n,{variant:"link",className:"py-0",children:"Ajouter une catégorie"})}),e.jsxs(U,{children:[e.jsxs($,{children:[e.jsx(B,{children:"Ajouter une categorie"}),e.jsx(G,{children:"Définissez un nom pour ajouter une categorie."})]}),e.jsx("div",{className:"flex flex-col px-4 gap-2",children:e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",onChange:C})]})}),e.jsxs(H,{className:"pt-2",children:[h&&setTimeout(()=>l(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:h}),e.jsx(_,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:j,disabled:x&&!0,children:x?e.jsx(A,{className:"animate-spin"}):"Ajouter"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>s(),children:"Annuler"})]})})]})]})]})},Oe=({providerCategoryId:a,createService:d})=>{const[i,r]=c.useState(!1),[s,x]=c.useState(),[p,h]=c.useState(!1),[l,y]=c.useState(),C=F("(min-width: 768px)"),j=S=>{const{name:v,value:w}=S.target,b=v==="price"||v==="deposit"?parseFloat(w):v==="duration"?parseFloat(le(w)):w;x({...s,[v]:b})},f=async S=>{if(S.preventDefault(),!(s!=null&&s.name)||!(s!=null&&s.price)||!(s!=null&&s.duration)){N.error("Veuillez renseigner tous les champs obligatoires."),y("border-destructive"),setTimeout(()=>y(null),4500);return}if(s.deposit>s.price){N.error("Le montant de l'acompte ne peut pas être supérieur au prix.");return}h(!0);try{await d({providerCategoryId:a,...s}),r(!1)}catch{N.error("Une erreur est survenue, veuillez contacter le support.")}h(!1)};return c.useEffect(()=>{i||x()},[i]),C?e.jsxs(T,{open:i,onOpenChange:r,children:[e.jsx(I,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Ajouter une prestation"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(z,{children:[e.jsx(O,{children:"Ajouter une prestation"}),e.jsx(M,{children:"Définissez un nom, un prix et une durée pour ajouter une prestation."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",onChange:j,className:l})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{id:"price",name:"price",type:"number",onChange:j,className:l}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Option"}),e.jsxs(X,{children:[e.jsx(Y,{children:e.jsx(Z,{})}),e.jsx(ee,{children:e.jsxs(se,{children:[e.jsx(k,{value:"ON_SITE",children:"Sur place"}),e.jsx(k,{value:"DEPOSIT",children:"Acompte"}),e.jsx(k,{value:"FULL",children:"Complet"})]})})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{id:"deposit",name:"deposit",type:"number",onChange:j}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(g,{id:"duration",name:"duration",type:"time",defaultValue:"00:00",onChange:j,className:l})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"description",children:"Description"}),e.jsx(J,{id:"description",name:"description",className:"resize-none",onChange:j})]})]}),e.jsx(V,{className:"sm:justify-start",children:e.jsx(R,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{variant:"outline",onClick:()=>x(),children:"Annuler"}),e.jsx(n,{onClick:f,disabled:p&&!0,children:p?e.jsx(A,{className:"animate-spin"}):"Ajouter"})]})})})]})]}):e.jsxs(E,{open:i,onOpenChange:r,children:[e.jsx(P,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Ajouter une prestation"})}),e.jsxs(U,{children:[e.jsxs($,{children:[e.jsx(B,{children:"Ajouter une prestation"}),e.jsx(G,{children:"Définissez un nom, un prix et une durée pour ajouter une prestation."})]}),e.jsxs("div",{className:"flex flex-col px-4 gap-2",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",onChange:j,className:l})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{id:"price",name:"price",type:"number",onChange:j,className:l}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(m,{children:"Option"}),e.jsxs(X,{children:[e.jsx(Y,{children:e.jsx(Z,{})}),e.jsx(ee,{children:e.jsxs(se,{children:[e.jsx(k,{value:"ON_SITE",children:"Sur place"}),e.jsx(k,{value:"DEPOSIT",children:"Acompte"}),e.jsx(k,{value:"FULL",children:"Complet"})]})})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{id:"deposit",name:"deposit",type:"number",onChange:j}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(g,{id:"duration",name:"duration",type:"time",defaultValue:"01:30",onChange:j,className:l})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"description",children:"Description"}),e.jsx(J,{id:"description",name:"description",className:"resize-none",onChange:j})]})]}),e.jsx(H,{className:"pt-2",children:e.jsx(_,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:f,disabled:p&&!0,children:p?e.jsx(A,{className:"animate-spin"}):"Ajouter"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>x(),children:"Annuler"})]})})})]})]})},Ve=({id:a,providerCategoryId:d,disableService:i})=>{const[r,s]=c.useState(!1),[x,p]=c.useState(!1),[h,l]=c.useState(),y=F("(min-width: 768px)"),C=async j=>{j.preventDefault(),p(!0);try{await i(a,d),s(!1)}catch{l("Une erreur est survenue, veuillez contacter le support.")}p(!1)};return y?e.jsxs(T,{open:r,onOpenChange:s,children:[e.jsx(I,{asChild:!0,children:e.jsx(n,{variant:"destructive",children:"Retirer la prestation"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(z,{children:[e.jsx(O,{className:"text-destructive",children:"Retirer la prestation"}),e.jsx(M,{children:"Êtes-vous sûr de vouloir retirer cette prestation ?"})]}),h&&setTimeout(()=>l(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:h}),e.jsx(V,{className:"sm:justify-start",children:e.jsx(R,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{variant:"outline",children:"Annuler"}),e.jsx(n,{onClick:C,variant:"destructive",disabled:x&&!0,children:x?e.jsx(A,{className:"animate-spin"}):"Retirer"})]})})})]})]}):e.jsxs(E,{open:r,onOpenChange:s,children:[e.jsx(P,{asChild:!0,children:e.jsx(n,{variant:"destructive",children:"Retirer la prestation"})}),e.jsxs(U,{children:[e.jsxs($,{children:[e.jsx(B,{className:"text-destructive",children:"Retirer la prestation"}),e.jsx(G,{children:"Êtes-vous sûr de vouloir retirer cette prestation ?"})]}),e.jsxs(H,{className:"pt-2",children:[h&&setTimeout(()=>l(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:h}),e.jsx(_,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:C,variant:"destructive",disabled:x&&!0,children:x?e.jsx(A,{className:"animate-spin"}):"Retirer"}),e.jsx(n,{className:"w-full",variant:"outline",children:"Annuler"})]})})]})]})]})},Re=({category:a,updateCategory:d})=>{const[i,r]=c.useState(!1),[s,x]=c.useState(),[p,h]=c.useState(!1),l=F("(min-width: 768px)"),y=async C=>{if(C.preventDefault(),h(!0),!(s!==a.name)){h(!1),r(!1),N("Aucun changement n'a été effectué.");return}try{await d(a.id,{name:s}),r(!1)}catch{N.error("Une erreur est survenue, veuillez contacter le support.")}h(!1)};return l?e.jsxs(T,{open:i,onOpenChange:r,children:[e.jsx(I,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la catégorie"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsx(z,{children:e.jsx(O,{children:"Modifier le nom de la catégorie"})}),e.jsxs(M,{children:[e.jsx(m,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",defaultValue:a.name,onChange:C=>x(C.target.value)})]}),e.jsx(V,{className:"sm:justify-start",children:e.jsx(R,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{onClick:y,disabled:p&&!0,children:p?e.jsx(A,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{variant:"outline",onClick:()=>setCategory(),children:"Annuler"})]})})})]})]}):e.jsxs(E,{open:i,onOpenChange:r,children:[e.jsx(P,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la catégorie"})}),e.jsxs(U,{children:[e.jsx($,{children:e.jsx(B,{children:" Modifier le nom de la catégorie"})}),e.jsx(M,{children:e.jsxs("div",{className:"px-4",children:[e.jsx(m,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",defaultValue:a.name,onChange:C=>x(C.target.value)})]})}),e.jsx(H,{className:"pt-2",children:e.jsx(_,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:y,disabled:p&&!0,children:p?e.jsx(A,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>setCategory(),children:"Annuler"})]})})})]})]})},Ee=({prevService:a,updateService:d})=>{const[i,r]=c.useState(!1),[s,x]=c.useState(),[p,h]=c.useState(!1),[l,y]=c.useState(),C=F("(min-width: 768px)"),j=v=>{const w=Math.floor(v/60),b=v%60,t=String(w).padStart(2,"0"),u=String(b).padStart(2,"0");return`${t}:${u}`},f=v=>{const{name:w,value:b}=v.target,t=w==="price"||w==="deposit"?parseFloat(b):w==="duration"?parseFloat(le(b)):b;x({...s,[w]:t})},S=async v=>{if(v.preventDefault(),h(!0),!(s!=null&&s.name)||!(s!=null&&s.price)||!(s!=null&&s.duration)){N.error("Veuillez renseigner tous les champs obligatoires."),y("border-destructive"),setTimeout(()=>y(null),4500),h(!1);return}if(s.deposit>s.price){N.error("L'acompte ne peut pas être supérieur au prix."),h(!1);return}if(!Object.keys(s).some(b=>s[b]!==a[b])){h(!1),r(!1);return}try{await d(a.id,s),r(!1)}catch{y("Une erreur est survenue, veuillez contacter le support.")}h(!1)};return c.useEffect(()=>{const{name:v,price:w,duration:b,description:t}=a;i||x({name:v,price:w,duration:b,description:t})},[i]),C?e.jsxs(T,{open:i,onOpenChange:r,children:[e.jsx(I,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la prestation"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(z,{children:[e.jsx(O,{children:"Modifier la prestation"}),e.jsx(M,{children:"Modifiez les détails de la prestation."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",defaultValue:a.name,onChange:f,className:l})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(g,{id:"price",name:"price",type:"number",onChange:f,defaultValue:a.price,className:l}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(g,{id:"deposit",name:"deposit",type:"number",onChange:f,defaultValue:a.deposit}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(g,{id:"duration",name:"duration",type:"time",defaultValue:j(a.duration),onChange:f,className:l})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"description",children:"Description"}),e.jsx(J,{id:"description",name:"description",className:"resize-none",defaultValue:a.description,onChange:f})]})]}),e.jsx(V,{className:"sm:justify-start",children:e.jsx(R,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{onClick:S,disabled:p&&!0,children:p?e.jsx(A,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{variant:"outline",onClick:()=>x(),children:"Annuler"})]})})})]})]}):e.jsxs(E,{open:i,onOpenChange:r,children:[e.jsx(P,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la prestation"})}),e.jsxs(U,{children:[e.jsxs($,{children:[e.jsx(B,{children:" Modifier la prestation"}),e.jsx(G,{children:"Modifiez les détails de la prestation."})]}),e.jsxs("div",{className:"flex flex-col px-4 gap-2",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",defaultValue:a.name,onChange:f,className:l})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(m,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(g,{id:"price",name:"price",type:"number",onChange:f,defaultValue:a.price,className:l}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(g,{id:"deposit",name:"deposit",type:"number",onChange:f,defaultValue:a.deposit}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(g,{id:"duration",name:"duration",type:"time",onChange:f,defaultValue:j(a.duration),className:l})]}),e.jsxs("div",{children:[e.jsx(m,{htmlFor:"description",children:"Description"}),e.jsx(J,{id:"description",name:"description",className:"resize-none",defaultValue:a.description,onChange:f})]})]}),e.jsx(H,{className:"pt-2",children:e.jsx(_,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:S,disabled:p&&!0,children:p?e.jsx(A,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>x(),children:"Annuler"})]})})})]})]})},Pe=c.forwardRef(({className:a,inset:d,children:i,...r},s)=>e.jsxs(ce,{ref:s,className:D("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",d&&"pl-8",a),...r,children:[i,e.jsx(ke,{className:"ml-auto h-4 w-4"})]}));Pe.displayName=ce.displayName;const Ue=c.forwardRef(({className:a,...d},i)=>e.jsx(de,{ref:i,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d}));Ue.displayName=de.displayName;const $e=c.forwardRef(({className:a,sideOffset:d=4,...i},r)=>e.jsx(Te,{children:e.jsx(oe,{ref:r,sideOffset:d,className:D("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})}));$e.displayName=oe.displayName;const Be=c.forwardRef(({className:a,inset:d,...i},r)=>e.jsx(me,{ref:r,className:D("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",d&&"pl-8",a),...i}));Be.displayName=me.displayName;const He=c.forwardRef(({className:a,children:d,checked:i,...r},s)=>e.jsxs(ue,{ref:s,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:i,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(xe,{children:e.jsx(ve,{className:"h-4 w-4"})})}),d]}));He.displayName=ue.displayName;const _e=c.forwardRef(({className:a,children:d,...i},r)=>e.jsxs(he,{ref:r,className:D("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(xe,{children:e.jsx(Le,{className:"h-2 w-2 fill-current"})})}),d]}));_e.displayName=he.displayName;const Je=c.forwardRef(({className:a,inset:d,...i},r)=>e.jsx(pe,{ref:r,className:D("px-2 py-1.5 text-sm font-semibold",d&&"pl-8",a),...i}));Je.displayName=pe.displayName;const fe=c.forwardRef(({className:a,...d},i)=>e.jsx(je,{ref:i,className:D("-mx-1 my-1 h-px bg-muted",a),...d}));fe.displayName=je.displayName;const Ge={ON_SITE:"Sur place",DEPOSIT:"Acompte",FULL:"Complet"},ms=()=>{const[a,d]=c.useState(),[i,r]=c.useState(!0),s=Ie(),x=Ne(),p=Ce(),{auth:h}=ye();c.useEffect(()=>{l()},[]);async function l(){var t;try{const u=await s.get("/api/providerCategory/me");d(u.data)}catch(u){((t=u.response)==null?void 0:t.status)===401?x("/login",{state:{from:p},replace:!0}):N.error(u.message)}r(!1)}async function y(t){try{await s.post("/api/providerService",{service:t,stripeAccountId:h.stripeConnectedAccountId}),l()}catch(u){N.error(u.message)}}async function C(t){try{await s.post("/api/providerCategory",t),l()}catch(u){N.error(u.message)}}async function j(t){try{await s.put(`/api/providerService/${t}`,{isActive:!0}),l()}catch(u){N.error(u.message)}}async function f(t){try{await s.put(`/api/providerCategory/${t}`,{isActive:!0}),l()}catch(u){N.error(u.message)}}async function S(t,u){try{await s.put(`/api/providerService/${t}`,u),l(),N.success("Service mis à jour")}catch(o){N.error(o.message)}}async function v(t,u){try{await s.put(`/api/providerCategory/${t}`,u),l(),N.success("Catégorie mise à jour")}catch(o){N.error(o.message)}}async function w(t,u){try{await s.put(`/api/providerService/${t}`,{isActive:!1,providerCategoryId:u}),l()}catch(o){N.error(o.message)}}async function b(t){try{await s.put(`/api/providerCategory/${t}`,{isActive:!1}),l()}catch(u){N.error(u.message)}}return i?e.jsx(A,{className:"w-8 h-8 animate-spin flex-1"}):e.jsxs("main",{className:"w-full max-w-screen-md mx-auto p-6 flex flex-1 flex-col space-y-4",children:[e.jsx(Me,{children:e.jsxs(Fe,{children:[e.jsx(q,{children:e.jsx(K,{asChild:!0,children:e.jsx(Q,{to:"/",children:"Tableau de bord"})})}),e.jsx(ae,{}),e.jsx(q,{children:e.jsx(K,{asChild:!0,children:e.jsx(Q,{to:"/salon",children:"Salon"})})}),e.jsx(ae,{}),e.jsx(q,{children:e.jsx(K,{asChild:!0,children:e.jsx(Q,{to:"/salon/availabilities",children:"Prestations"})})})]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Mes prestations"}),e.jsx(ze,{createCategory:C})]}),a==null?void 0:a.map((t,u)=>t.isActive&&e.jsx(be,{type:"single",collapsible:!0,defaultValue:"item-0",children:e.jsxs(Se,{value:`item-${u}`,className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ae,{children:e.jsx("h2",{className:"text-2xl font-medium text-left",children:t.name})}),e.jsx("div",{className:"space-x-2",children:e.jsxs(te,{children:[e.jsx(ie,{asChild:!0,children:e.jsx(n,{variant:"ghost",className:"ml-4",children:e.jsx(ne,{})})}),e.jsxs(re,{align:"end",className:"w-fit flex flex-col gap-2",children:[e.jsx(Oe,{providerCategoryId:t.id,createService:y}),e.jsx(fe,{}),e.jsx(Re,{category:t,updateCategory:v}),e.jsx(we,{id:t.id,action:b,actionLabel:"Retirer",variant:"destructive",title:"Retirer la catégorie",description:"Toutes les prestations associées seront retirées.",trigger:"Retirer la catégorie",triggerVariant:"destructive"})]})]})})]}),e.jsx("ul",{className:"space-y-2",children:t.services.map(o=>o.isActive&&e.jsx(De,{children:e.jsxs("li",{className:"space-y-2 w-full rounded-md p-4 pt-2 pr-0 bg-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl",children:o.name}),e.jsxs(te,{children:[e.jsx(ie,{asChild:!0,children:e.jsx(n,{variant:"ghost",className:"ml-4",children:e.jsx(ne,{})})}),e.jsxs(re,{align:"end",className:"w-fit flex flex-col gap-2",children:[e.jsx(Ee,{prevService:o,updateService:S}),e.jsx(Ve,{id:o.id,providerCategoryId:t.id,disableService:w})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"pr-4 line-clamp-2 text-muted",children:o.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between pr-4",children:[e.jsxs("div",{className:"flex gap-2 bg-primary-400 w-fit px-3 py-2 rounded text-white",children:[e.jsxs("p",{children:[o.price,"€"]}),"•",e.jsx("p",{children:W(o.duration)})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-primary-300 w-fit p-1 rounded text-white",children:[e.jsx("div",{className:"bg-primary-400 w-fit px-2 py-1 rounded",children:e.jsx("p",{children:Ge[o.paymentOption]})}),"•",e.jsx("div",{className:"bg-primary-400 w-fit px-2 py-1 rounded",children:e.jsxs("p",{children:["Acompte ",o.deposit,"€"]})})]})]})]})]})},o.id))})]})},t.id)),e.jsx("div",{className:"divider divider-start text-muted",children:"Inactives"}),a.map(t=>(t.services.some(o=>!o.isActive)||!t.isActive)&&e.jsxs("div",{className:"space-y-2 text-muted",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-medium",children:t.name}),!t.isActive&&e.jsx(n,{variant:"link",onClick:()=>f(t.id),children:"Activer la catégorie"})]}),e.jsx("ul",{className:"space-y-2",children:t.services.map(o=>(!o.isActive||!t.isActive)&&e.jsx("li",{className:"flex items-center justify-between gap-4",children:e.jsxs("div",{className:"w-full rounded-md p-4 bg-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{children:o.name}),t.isActive&&!o.isActive&&e.jsx(n,{variant:"link",onClick:()=>j(o.id),children:"Activer le service"}),!t.isActive&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{children:W(o.duration)}),e.jsx("div",{className:"divider divider-horizontal"}),e.jsxs("p",{children:[o.price,"€"]})]})]}),e.jsx("p",{children:o.description})]})},o.id))})]},t.id)),e.jsxs("p",{className:"text-sm text-muted",children:["La suppression des catégories et services est restreinte afin d'améliorer l'analyse de l'activité. ",e.jsx("br",{})," Pour supprimer définitivement une catégorie ou un service, veuillez"," ",e.jsxs(n,{variant:"link",className:"pl-0",children:[e.jsx("a",{href:"https://www.weconnect-rdv.fr/provider/cm13ksbde0000g98rx8rpbwte",target:"_blank",rel:"noreferrer noopener",children:"contacter le support"}),"."]})]})]})};export{ms as default};
