import{c as fe,r as c,j as e,B as n,I as g,p as S,J as N,a as A,C as ge,e as ve,m as Ne,u as Ce,L as G}from"./index-DcugkPC_.js";import{M as ye}from"./ModalAction-CowdjVfL.js";import{u as M,D as F,a as T,b as L,c as z,d as I,j as k,k as O,l as R,e as V,f as E,g as P,h as U,i as $,m as J,n as B,o as H}from"./drawer-BN1iXKWN.js";import{L as u}from"./label-BEDWncpw.js";import{T as _}from"./textarea-d6PdvlwB.js";import{c as ne,a as K}from"./formatting-Cw3qGvmM.js";import{S as W,a as X,b as Y,c as Z,d as ee,e as D}from"./select-BlpOjVpU.js";import{A as we,a as be,b as Se,c as Ae}from"./accordion-CyujXRj0.js";import{C as De,B as ke,a as Me,b as Q,c as q,d as se}from"./breadcrumb-B8aUs7HV.js";import{S as le,a as ce,P as Fe,C as de,I as oe,b as me,c as xe,R as ue,L as he,d as pe}from"./index-DEdPw5W_.js";import{P as ae,a as te,b as ie}from"./popover-WLexqxPa.js";import{u as Te}from"./useAxiosPrivate-BQKv4A0e.js";import{E as re}from"./ellipsis-vertical-rKOkNdea.js";import"./axiosPrivate-DKatnhxZ.js";import"./index-BAQT2tpn.js";import"./chevron-down-ClzpxZLP.js";import"./index-qy7be5sr.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=fe("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ze=({createCategory:t})=>{const[d,i]=c.useState(!1),[r,s]=c.useState(),[h,p]=c.useState(!1),[l,x]=c.useState(),y=M("(min-width: 768px)"),C=f=>{const{name:b,value:v}=f.target;s({[b]:v})},j=async f=>{if(f.preventDefault(),!(r!=null&&r.name)){x("Veuillez renseigner le nom de la catégorie.");return}p(!0);try{await t(r),i(!1)}catch{x("Une erreur est survenue, veuillez contacter le support.")}p(!1)};return c.useEffect(()=>{d||s()},[d]),y?e.jsxs(F,{open:d,onOpenChange:i,children:[e.jsx(T,{asChild:!0,children:e.jsx(n,{variant:"link",className:"py-0",children:"Ajouter une catégorie"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(z,{children:[e.jsx(I,{children:"Ajouter une catégorie"}),e.jsx(k,{children:"Définissez un nom pour ajouter une catégorie."})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{children:[e.jsx(u,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",onChange:C})]})}),l&&setTimeout(()=>x(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:l}),e.jsx(O,{className:"sm:justify-start",children:e.jsx(R,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{variant:"outline",onClick:()=>s(),children:"Annuler"}),e.jsx(n,{onClick:j,disabled:h&&!0,children:h?e.jsx(S,{className:"animate-spin"}):"Ajouter"})]})})})]})]}):e.jsxs(V,{open:d,onOpenChange:i,children:[e.jsx(E,{asChild:!0,children:e.jsx(n,{variant:"link",className:"py-0",children:"Ajouter une catégorie"})}),e.jsxs(P,{children:[e.jsxs(U,{children:[e.jsx($,{children:"Ajouter une categorie"}),e.jsx(J,{children:"Définissez un nom pour ajouter une categorie."})]}),e.jsx("div",{className:"flex flex-col px-4 gap-2",children:e.jsxs("div",{children:[e.jsx(u,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",onChange:C})]})}),e.jsxs(B,{className:"pt-2",children:[l&&setTimeout(()=>x(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:l}),e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:j,disabled:h&&!0,children:h?e.jsx(S,{className:"animate-spin"}):"Ajouter"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>s(),children:"Annuler"})]})})]})]})]})},Ie=({providerCategoryId:t,createService:d})=>{const[i,r]=c.useState(!1),[s,h]=c.useState(),[p,l]=c.useState(!1),[x,y]=c.useState(),C=M("(min-width: 768px)"),j=b=>{const{name:v,value:w}=b.target,a=v==="price"||v==="deposit"?parseFloat(w):v==="duration"?parseFloat(ne(w)):w;h({...s,[v]:a})},f=async b=>{if(b.preventDefault(),!(s!=null&&s.name)||!(s!=null&&s.price)||!(s!=null&&s.duration)){N.error("Veuillez renseigner tous les champs obligatoires."),y("border-destructive"),setTimeout(()=>y(null),4500);return}if(s.deposit>s.price){N.error("Le montant de l'acompte ne peut pas être supérieur au prix.");return}l(!0);try{await d({providerCategoryId:t,...s}),r(!1)}catch{N.error("Une erreur est survenue, veuillez contacter le support.")}l(!1)};return c.useEffect(()=>{i||h()},[i]),C?e.jsxs(F,{open:i,onOpenChange:r,children:[e.jsx(T,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Ajouter une prestation"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(z,{children:[e.jsx(I,{children:"Ajouter une prestation"}),e.jsx(k,{children:"Définissez un nom, un prix et une durée pour ajouter une prestation."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",onChange:j,className:x})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{id:"price",name:"price",type:"number",onChange:j,className:x}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Option"}),e.jsxs(W,{children:[e.jsx(X,{children:e.jsx(Y,{})}),e.jsx(Z,{children:e.jsxs(ee,{children:[e.jsx(D,{value:"ON_SITE",children:"Sur place"}),e.jsx(D,{value:"DEPOSIT",children:"Acompte"}),e.jsx(D,{value:"FULL",children:"Complet"})]})})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{id:"deposit",name:"deposit",type:"number",onChange:j}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(g,{id:"duration",name:"duration",type:"time",onChange:j,className:x})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"description",children:"Description"}),e.jsx(_,{id:"description",name:"description",className:"resize-none",onChange:j})]})]}),e.jsx(O,{className:"sm:justify-start",children:e.jsx(R,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{variant:"outline",onClick:()=>h(),children:"Annuler"}),e.jsx(n,{onClick:f,disabled:p&&!0,children:p?e.jsx(S,{className:"animate-spin"}):"Ajouter"})]})})})]})]}):e.jsxs(V,{open:i,onOpenChange:r,children:[e.jsx(E,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Ajouter une prestation"})}),e.jsxs(P,{children:[e.jsxs(U,{children:[e.jsx($,{children:"Ajouter une prestation"}),e.jsx(J,{children:"Définissez un nom, un prix et une durée pour ajouter une prestation."})]}),e.jsxs("div",{className:"flex flex-col px-4 gap-2",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",onChange:j,className:x})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{id:"price",name:"price",type:"number",onChange:j,className:x}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(u,{children:"Option"}),e.jsxs(W,{children:[e.jsx(X,{children:e.jsx(Y,{})}),e.jsx(Z,{children:e.jsxs(ee,{children:[e.jsx(D,{value:"ON_SITE",children:"Sur place"}),e.jsx(D,{value:"DEPOSIT",children:"Acompte"}),e.jsx(D,{value:"FULL",children:"Complet"})]})})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{id:"deposit",name:"deposit",type:"number",onChange:j}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(g,{id:"duration",name:"duration",type:"time",onChange:j,className:x})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"description",children:"Description"}),e.jsx(_,{id:"description",name:"description",className:"resize-none",onChange:j})]})]}),e.jsx(B,{className:"pt-2",children:e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:f,disabled:p&&!0,children:p?e.jsx(S,{className:"animate-spin"}):"Ajouter"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>h(),children:"Annuler"})]})})})]})]})},Oe=({id:t,providerCategoryId:d,disableService:i})=>{const[r,s]=c.useState(!1),[h,p]=c.useState(!1),[l,x]=c.useState(),y=M("(min-width: 768px)"),C=async j=>{j.preventDefault(),p(!0);try{await i(t,d),s(!1)}catch{x("Une erreur est survenue, veuillez contacter le support.")}p(!1)};return y?e.jsxs(F,{open:r,onOpenChange:s,children:[e.jsx(T,{asChild:!0,children:e.jsx(n,{variant:"destructive",children:"Retirer la prestation"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(z,{children:[e.jsx(I,{className:"text-destructive",children:"Retirer la prestation"}),e.jsx(k,{children:"Êtes-vous sûr de vouloir retirer cette prestation ?"})]}),l&&setTimeout(()=>x(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:l}),e.jsx(O,{className:"sm:justify-start",children:e.jsx(R,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{variant:"outline",children:"Annuler"}),e.jsx(n,{onClick:C,variant:"destructive",disabled:h&&!0,children:h?e.jsx(S,{className:"animate-spin"}):"Retirer"})]})})})]})]}):e.jsxs(V,{open:r,onOpenChange:s,children:[e.jsx(E,{asChild:!0,children:e.jsx(n,{variant:"destructive",children:"Retirer la prestation"})}),e.jsxs(P,{children:[e.jsxs(U,{children:[e.jsx($,{className:"text-destructive",children:"Retirer la prestation"}),e.jsx(J,{children:"Êtes-vous sûr de vouloir retirer cette prestation ?"})]}),e.jsxs(B,{className:"pt-2",children:[l&&setTimeout(()=>x(null),3e3)&&e.jsx("p",{className:"text-destructive text-sm",children:l}),e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:C,variant:"destructive",disabled:h&&!0,children:h?e.jsx(S,{className:"animate-spin"}):"Retirer"}),e.jsx(n,{className:"w-full",variant:"outline",children:"Annuler"})]})})]})]})]})},Re=({category:t,updateCategory:d})=>{const[i,r]=c.useState(!1),[s,h]=c.useState(),[p,l]=c.useState(!1),x=M("(min-width: 768px)"),y=async C=>{if(C.preventDefault(),l(!0),!(s!==t.name)){l(!1),r(!1),N("Aucun changement n'a été effectué.");return}try{await d(t.id,{name:s}),r(!1)}catch{N.error("Une erreur est survenue, veuillez contacter le support.")}l(!1)};return x?e.jsxs(F,{open:i,onOpenChange:r,children:[e.jsx(T,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la catégorie"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsx(z,{children:e.jsx(I,{children:"Modifier le nom de la catégorie"})}),e.jsxs(k,{children:[e.jsx(u,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",defaultValue:t.name,onChange:C=>h(C.target.value)})]}),e.jsx(O,{className:"sm:justify-start",children:e.jsx(R,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{onClick:y,disabled:p&&!0,children:p?e.jsx(S,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{variant:"outline",onClick:()=>setCategory(),children:"Annuler"})]})})})]})]}):e.jsxs(V,{open:i,onOpenChange:r,children:[e.jsx(E,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la catégorie"})}),e.jsxs(P,{children:[e.jsx(U,{children:e.jsx($,{children:" Modifier le nom de la catégorie"})}),e.jsx(k,{children:e.jsxs("div",{className:"px-4",children:[e.jsx(u,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",defaultValue:t.name,onChange:C=>h(C.target.value)})]})}),e.jsx(B,{className:"pt-2",children:e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:y,disabled:p&&!0,children:p?e.jsx(S,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>setCategory(),children:"Annuler"})]})})})]})]})},Ve=({prevService:t,updateService:d})=>{const[i,r]=c.useState(!1),[s,h]=c.useState(),[p,l]=c.useState(!1),[x,y]=c.useState(),C=M("(min-width: 768px)"),j=v=>{const w=Math.floor(v/60),a=v%60,o=String(w).padStart(2,"0"),m=String(a).padStart(2,"0");return`${o}:${m}`},f=v=>{const{name:w,value:a}=v.target,o=w==="price"||w==="deposit"?parseFloat(a):w==="duration"?parseFloat(ne(a)):a;h({...s,[w]:o})},b=async v=>{if(v.preventDefault(),l(!0),!(s!=null&&s.name)||!(s!=null&&s.price)||!(s!=null&&s.duration)){N.error("Veuillez renseigner tous les champs obligatoires."),y("border-destructive"),setTimeout(()=>y(null),4500),l(!1);return}if(s.deposit>s.price){N.error("L'acompte ne peut pas être supérieur au prix."),l(!1);return}if(!Object.keys(s).some(a=>s[a]!==t[a])){l(!1),r(!1);return}try{await d(t.id,s),r(!1)}catch{y("Une erreur est survenue, veuillez contacter le support.")}l(!1)};return c.useEffect(()=>{const{name:v,price:w,duration:a,description:o}=t;i||h({name:v,price:w,duration:a,description:o})},[i]),C?e.jsxs(F,{open:i,onOpenChange:r,children:[e.jsx(T,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la prestation"})}),e.jsxs(L,{className:"sm:max-w-[425px]",children:[e.jsxs(z,{children:[e.jsx(I,{children:"Modifier la prestation"}),e.jsx(k,{children:"Modifiez les détails de la prestation."})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",defaultValue:t.name,onChange:f,className:x})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(g,{id:"price",name:"price",type:"number",onChange:f,defaultValue:t.price,className:x}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(g,{id:"deposit",name:"deposit",type:"number",onChange:f,defaultValue:t.deposit}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(g,{id:"duration",name:"duration",type:"time",defaultValue:j(t.duration),onChange:f,className:x})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"description",children:"Description"}),e.jsx(_,{id:"description",name:"description",className:"resize-none",defaultValue:t.description,onChange:f})]})]}),e.jsx(O,{className:"sm:justify-start",children:e.jsx(R,{asChild:!0,children:e.jsxs("div",{className:"w-full flex items-center justify-between",children:[e.jsx(n,{onClick:b,disabled:p&&!0,children:p?e.jsx(S,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{variant:"outline",onClick:()=>h(),children:"Annuler"})]})})})]})]}):e.jsxs(V,{open:i,onOpenChange:r,children:[e.jsx(E,{asChild:!0,children:e.jsx(n,{variant:"outline",children:"Modifier la prestation"})}),e.jsxs(P,{children:[e.jsxs(U,{children:[e.jsx($,{children:" Modifier la prestation"}),e.jsx(J,{children:"Modifiez les détails de la prestation."})]}),e.jsxs("div",{className:"flex flex-col px-4 gap-2",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"name",children:"Nom"}),e.jsx(g,{id:"name",name:"name",type:"text",defaultValue:t.name,onChange:f,className:x})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(u,{htmlFor:"price",children:"Prix"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(g,{id:"price",name:"price",type:"number",onChange:f,defaultValue:t.price,className:x}),e.jsx("span",{children:"€"})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"deposit",children:"Acompte"}),e.jsxs("div",{className:"flex items-center gap-2 w-2/3",children:[e.jsx(g,{id:"deposit",name:"deposit",type:"number",onChange:f,defaultValue:t.deposit}),e.jsx("span",{children:"€"})]})]})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"duration",children:"Durée (heures:minutes)"}),e.jsx(g,{id:"duration",name:"duration",type:"time",onChange:f,defaultValue:j(t.duration),className:x})]}),e.jsxs("div",{children:[e.jsx(u,{htmlFor:"description",children:"Description"}),e.jsx(_,{id:"description",name:"description",className:"resize-none",defaultValue:t.description,onChange:f})]})]}),e.jsx(B,{className:"pt-2",children:e.jsx(H,{asChild:!0,children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",onClick:b,disabled:p&&!0,children:p?e.jsx(S,{className:"animate-spin"}):"Modifier"}),e.jsx(n,{className:"w-full",variant:"outline",onClick:()=>h(),children:"Annuler"})]})})})]})]})},Ee=c.forwardRef(({className:t,inset:d,children:i,...r},s)=>e.jsxs(le,{ref:s,className:A("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",d&&"pl-8",t),...r,children:[i,e.jsx(De,{className:"ml-auto h-4 w-4"})]}));Ee.displayName=le.displayName;const Pe=c.forwardRef(({className:t,...d},i)=>e.jsx(ce,{ref:i,className:A("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...d}));Pe.displayName=ce.displayName;const Ue=c.forwardRef(({className:t,sideOffset:d=4,...i},r)=>e.jsx(Fe,{children:e.jsx(de,{ref:r,sideOffset:d,className:A("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...i})}));Ue.displayName=de.displayName;const $e=c.forwardRef(({className:t,inset:d,...i},r)=>e.jsx(oe,{ref:r,className:A("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",d&&"pl-8",t),...i}));$e.displayName=oe.displayName;const Be=c.forwardRef(({className:t,children:d,checked:i,...r},s)=>e.jsxs(me,{ref:s,className:A("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:i,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(xe,{children:e.jsx(ge,{className:"h-4 w-4"})})}),d]}));Be.displayName=me.displayName;const He=c.forwardRef(({className:t,children:d,...i},r)=>e.jsxs(ue,{ref:r,className:A("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(xe,{children:e.jsx(Le,{className:"h-2 w-2 fill-current"})})}),d]}));He.displayName=ue.displayName;const _e=c.forwardRef(({className:t,inset:d,...i},r)=>e.jsx(he,{ref:r,className:A("px-2 py-1.5 text-sm font-semibold",d&&"pl-8",t),...i}));_e.displayName=he.displayName;const je=c.forwardRef(({className:t,...d},i)=>e.jsx(pe,{ref:i,className:A("-mx-1 my-1 h-px bg-muted",t),...d}));je.displayName=pe.displayName;const Je={ON_SITE:"Sur place",DEPOSIT:"Acompte",FULL:"Complet"},ds=()=>{const[t,d]=c.useState(),[i,r]=c.useState(!0),s=Te(),h=ve(),p=Ne();Ce(),c.useEffect(()=>{l()},[]);async function l(){var a;try{const o=await s.get("/api/providerCategory/me");d(o.data)}catch(o){((a=o.response)==null?void 0:a.status)===401?h("/login",{state:{from:p},replace:!0}):N.error(o.message)}r(!1)}async function x(a){try{await s.post("/api/providerService",a),l()}catch(o){N.error(o.message)}}async function y(a){try{await s.post("/api/providerCategory",a),l()}catch(o){N.error(o.message)}}async function C(a){try{await s.put(`/api/providerService/${a}`,{isActive:!0}),l()}catch(o){N.error(o.message)}}async function j(a){try{await s.put(`/api/providerCategory/${a}`,{isActive:!0}),l()}catch(o){N.error(o.message)}}async function f(a,o){try{await s.put(`/api/providerService/${a}`,o),l(),N.success("Service mis à jour")}catch(m){N.error(m.message)}}async function b(a,o){try{await s.put(`/api/providerCategory/${a}`,o),l(),N.success("Catégorie mise à jour")}catch(m){N.error(m.message)}}async function v(a,o){try{await s.put(`/api/providerService/${a}`,{isActive:!1,providerCategoryId:o}),l()}catch(m){N.error(m.message)}}async function w(a){try{await s.put(`/api/providerCategory/${a}`,{isActive:!1}),l()}catch(o){N.error(o.message)}}return i?e.jsx(S,{className:"w-8 h-8 animate-spin flex-1"}):e.jsxs("main",{className:"w-full max-w-screen-md mx-auto p-6 flex flex-1 flex-col space-y-4",children:[e.jsx(ke,{children:e.jsxs(Me,{children:[e.jsx(Q,{children:e.jsx(q,{asChild:!0,children:e.jsx(G,{to:"/",children:"Tableau de bord"})})}),e.jsx(se,{}),e.jsx(Q,{children:e.jsx(q,{asChild:!0,children:e.jsx(G,{to:"/salon",children:"Salon"})})}),e.jsx(se,{}),e.jsx(Q,{children:e.jsx(q,{asChild:!0,children:e.jsx(G,{to:"/salon/availabilities",children:"Prestations"})})})]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-semibold",children:"Mes prestations"}),e.jsx(ze,{createCategory:y})]}),t==null?void 0:t.map((a,o)=>a.isActive&&e.jsx(we,{type:"single",collapsible:!0,defaultValue:"item-0",children:e.jsxs(be,{value:`item-${o}`,className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Se,{children:e.jsx("h2",{className:"text-2xl font-medium text-left",children:a.name})}),e.jsx("div",{className:"space-x-2",children:e.jsxs(ae,{children:[e.jsx(te,{asChild:!0,children:e.jsx(n,{variant:"ghost",className:"ml-4",children:e.jsx(re,{})})}),e.jsxs(ie,{align:"end",className:"w-fit flex flex-col gap-2",children:[e.jsx(Ie,{providerCategoryId:a.id,createService:x}),e.jsx(je,{}),e.jsx(Re,{category:a,updateCategory:b}),e.jsx(ye,{id:a.id,action:w,actionLabel:"Retirer",variant:"destructive",title:"Retirer la catégorie",description:"Toutes les prestations associées seront retirées.",trigger:"Retirer la catégorie",triggerVariant:"destructive"})]})]})})]}),e.jsx("ul",{className:"space-y-2",children:a.services.map(m=>m.isActive&&e.jsx(Ae,{children:e.jsxs("li",{className:"space-y-2 w-full rounded-md p-4 pt-2 pr-0 bg-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl",children:m.name}),e.jsxs(ae,{children:[e.jsx(te,{asChild:!0,children:e.jsx(n,{variant:"ghost",className:"ml-4",children:e.jsx(re,{})})}),e.jsxs(ie,{align:"end",className:"w-fit flex flex-col gap-2",children:[e.jsx(Ve,{prevService:m,updateService:f}),e.jsx(Oe,{id:m.id,providerCategoryId:a.id,disableService:v})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"pr-4 line-clamp-2 text-muted",children:m.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center justify-between pr-4",children:[e.jsxs("div",{className:"flex gap-2 bg-primary-400 w-fit px-3 py-2 rounded text-white",children:[e.jsxs("p",{children:[m.price,"€"]}),"•",e.jsx("p",{children:K(m.duration)})]}),e.jsxs("div",{className:"flex items-center gap-1 bg-primary-300 w-fit p-1 rounded text-white",children:[e.jsx("div",{className:"bg-primary-400 w-fit px-2 py-1 rounded",children:e.jsx("p",{children:Je[m.paymentOption]})}),"•",e.jsx("div",{className:"bg-primary-400 w-fit px-2 py-1 rounded",children:e.jsxs("p",{children:["Acompte ",m.deposit,"€"]})})]})]})]})]})},m.id))})]})},a.id)),e.jsx("div",{className:"divider divider-start text-muted",children:"Inactives"}),t.map(a=>(a.services.some(m=>!m.isActive)||!a.isActive)&&e.jsxs("div",{className:"space-y-2 text-muted",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-medium",children:a.name}),!a.isActive&&e.jsx(n,{variant:"link",onClick:()=>j(a.id),children:"Activer la catégorie"})]}),e.jsx("ul",{className:"space-y-2",children:a.services.map(m=>(!m.isActive||!a.isActive)&&e.jsx("li",{className:"flex items-center justify-between gap-4",children:e.jsxs("div",{className:"w-full rounded-md p-4 bg-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{children:m.name}),a.isActive&&!m.isActive&&e.jsx(n,{variant:"link",onClick:()=>C(m.id),children:"Activer le service"}),!a.isActive&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{children:K(m.duration)}),e.jsx("div",{className:"divider divider-horizontal"}),e.jsxs("p",{children:[m.price,"€"]})]})]}),e.jsx("p",{children:m.description})]})},m.id))})]},a.id)),e.jsxs("p",{className:"text-sm text-muted",children:["La suppression des catégories et services est restreinte afin d'améliorer l'analyse de l'activité. ",e.jsx("br",{})," Pour supprimer définitivement une catégorie ou un service, veuillez"," ",e.jsxs(n,{variant:"link",className:"pl-0",children:[e.jsx("a",{href:"https://www.weconnect-rdv.fr/provider/cm13ksbde0000g98rx8rpbwte",target:"_blank",rel:"noreferrer noopener",children:"contacter le support"}),"."]})]})]})};export{ds as default};
