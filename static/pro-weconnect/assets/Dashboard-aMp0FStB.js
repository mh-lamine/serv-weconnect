import{c as D,j as e,a as k,b as B,B as L,u as R,d as S,r as d,e as $,f as I,L as b}from"./index-CqgZUO9D.js";import{M as v}from"./index-DIxS9AYn.js";import{A as F,a as A,b as z,c as C}from"./accordion-CGY37esJ.js";import{B as G,a as q,b as O,c as H}from"./breadcrumb-CXAsfp7n.js";import{T as U,a as u,b as W,c as E}from"./tabs-DfJr2iNJ.js";import"./index-lC4o3Eqj.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=D("BellDot",[["path",{d:"M19.4 14.9C20.2 16.4 21 17 21 17H3s3-2 3-9c0-3.3 2.7-6 6-6 .7 0 1.3.1 1.9.3",key:"xcehk"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["circle",{cx:"18",cy:"8",r:"3",key:"1g0gzu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=D("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Q=B("inline-flex items-center rounded-full border px-2.5 py-0.5 text-sm w-fit font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-light",outline:"border-transparent bg-dark/10",success:"border-transparent bg-success text-light"}},defaultVariants:{variant:"default"}});function m({className:t,variant:n,...a}){return e.jsx("div",{className:k(Q({variant:n}),t),...a})}const X=({appointment:t,acceptAppointment:n,cancelAppointment:a,today:h=!1,past:r=!1})=>e.jsxs("div",{className:`flex flex-col gap-2 py-2 ${r&&"text-muted"}`,children:[e.jsx("div",{className:"divider divider-start my-0",children:e.jsxs("h2",{className:"text-xl font-semibold",children:[t.client.firstName," ",t.client.lastName]})}),e.jsx("div",{className:"flex flex-col md:flex-row md:gap-4",children:e.jsx(L,{variant:"link",className:`w-fit py-0 ${r&&"text-muted"}`,children:e.jsx("a",{href:`tel:${t.client.phoneNumber}`,children:t.client.phoneNumber.replace(/(\d{2})(?=\d)/g,"$1 ")})})}),e.jsxs("h3",{className:"text-lg",children:[e.jsx("span",{className:"font-medium",children:t.service.name})," ",e.jsx("br",{}),!h&&e.jsxs(e.Fragment,{children:["le"," ",e.jsxs("span",{className:"font-medium",children:[new Date(t.date).toLocaleDateString("fr-FR",{weekday:"long",month:"long",day:"numeric"}).toUpperCase()," "]})]}),"√†"," ",e.jsx("span",{className:"font-medium",children:new Date(t.date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),t.status==="PENDING"&&e.jsx(m,{variant:"outline",className:r&&"bg-muted",children:"En attente de confirmation"}),t.status==="ACCEPTED"&&e.jsx(m,{className:r&&"bg-muted",children:"Rendez-vous confirm√©"}),t.status==="COMPLETED"&&e.jsx(m,{variant:"success",className:r&&"bg-muted",children:"Pass√©"}),t.status==="CANCELLED"&&e.jsx(m,{variant:"destructive",className:r&&"bg-muted",children:"Annul√©"}),t.status==="PENDING"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx(v,{id:t.id,action:n,actionLabel:"Accepter",title:"Accepter le rendez-vous",description:"√ätes-vous s√ªr de vouloir accepter ce rendez-vous ?",successMessage:"Rendez-vous accept√©",trigger:"Accepter",variant:"success"}),e.jsx(v,{id:t.id,action:a,actionLabel:"Refuser",title:"Refuser le rendez-vous",description:"√ätes-vous s√ªr de vouloir refuser ce rendez-vous ?",successMessage:"Rendez-vous refus√©",trigger:"Refuser",variant:"destructive"})]}),t.status==="ACCEPTED"&&e.jsx("div",{className:"ml-auto",children:e.jsx(v,{id:t.id,action:a,actionLabel:"Annuler",title:"Annuler le rendez-vous",description:"√ätes-vous s√ªr de vouloir annuler ce rendez-vous ?",successMessage:"Rendez-vous annul√©",trigger:"Annuler",variant:"destructive"})})]}),x=X,Y=()=>{const{setAuth:t}=R();return async()=>{t(null);try{await S.get("/api/auth/logout",{withCredentials:!0})}catch(a){console.error(a)}}},Z=Y;function ne(){const[t,n]=d.useState(),[a,h]=d.useState(),[r,g]=d.useState(!0),w=Z(),c=$(),P=I();async function T(){g(!0);try{const{data:s}=await c.get("/api/users");return h(s),s}catch(s){console.error(s)}finally{g(!1)}}async function f(){try{const s=await c.get("/api/appointments/provider");n(s.data)}catch(s){console.error(s)}finally{g(!1)}}async function y(s){try{await c.patch(`/api/appointments/${s}`,{status:"ACCEPTED"}),f()}catch(i){console.error(i)}}async function j(s){try{await c.patch(`/api/appointments/${s}`,{status:"CANCELLED"}),f()}catch(i){console.error(i)}}const o=(s,i)=>s.filter(N=>N.status===i).sort((N,V)=>new Date(N.date)-new Date(V.date)),M=async()=>{await w(),P("/login")};d.useEffect(()=>{T(),f()},[]);const l=(t==null?void 0:t.todaysAppointments)||[],p=(t==null?void 0:t.futureAppointments)||[];return e.jsxs("main",{className:"w-full h-full max-w-screen-md mx-auto p-6 flex flex-1 flex-col gap-4",children:[e.jsx(G,{className:"h-0 p-0",children:e.jsx(q,{children:e.jsx(O,{children:e.jsx(H,{asChild:!0,children:e.jsx(b,{to:"/",children:"Tableau de bord"})})})})}),e.jsxs(U,{defaultValue:"today",className:"space-y-4",children:[e.jsx(u,{value:"today",children:e.jsx("h1",{className:"text-3xl font-semibold",children:"Mes rendez-vous de la journ√©e"})}),e.jsx(u,{value:"incoming",children:e.jsx("h1",{className:"text-3xl font-semibold",children:"Mes rendez-vous √† venir"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(W,{children:[e.jsx(E,{value:"today",children:"Aujourd'hui"}),e.jsx(E,{value:"incoming",children:"√Ä venir"})]}),e.jsx(b,{to:"/salon",children:e.jsx(K,{size:24,className:"text-primary"})}),!r&&!(a!=null&&a.email)&&e.jsx("div",{className:"ml-auto",children:e.jsx(v,{defaultOpen:!0,title:"Nouveaut√© : connexion par e-mail",description:`Chers professionnels,

Apr√®s la prochaine mise √† jour, vous devrez vous connecter avec votre adresse e-mail pour acc√©der √† votre espace. Vous pouvez mettre √† jour votre adresse e-mail sur la page des informations de votre salon.

Merci de votre compr√©hension, l'√©quipe WeConnect üöÄ`,cancelText:"C'est compris !",trigger:e.jsx(J,{size:24,className:"text-primary"}),triggerVariant:"ghost"})})]}),e.jsx(u,{value:"today",className:"space-y-4",children:l.length?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-muted",children:["Vous avez ",l.length," rendez-vous aujourd'hui."]}),o(l,"ACCEPTED").map(s=>e.jsx(x,{appointment:s,cancelAppointment:j,today:!0},s.id)),e.jsx("div",{className:"divider divider-start text-muted",children:"Mes rendez-vous pass√©s"}),o(l,"COMPLETED").map(s=>e.jsx(x,{appointment:s,past:!0,today:!0},s.id))]}):e.jsxs("p",{className:"text-muted",children:[" ","Vous n'avez aucun rendez-vous aujourd'hui."]})}),e.jsx(u,{value:"incoming",children:p.length?e.jsxs(F,{type:"single",collapsible:!0,defaultValue:"item-0",className:"w-full",children:[e.jsxs(A,{value:"item-0",children:[e.jsx(z,{children:e.jsxs("p",{className:"text-muted",children:["Vous avez"," ",t.futureAppointments.filter(s=>s.status==="PENDING").length," ","demande(s) en attente."]})}),e.jsx(C,{children:o(p,"PENDING").map(s=>e.jsx(x,{appointment:s,acceptAppointment:y,cancelAppointment:j},s.id))})]}),e.jsxs(A,{value:"item-1",children:[e.jsx(z,{children:e.jsxs("p",{className:"text-muted",children:["Vous avez"," ",t.futureAppointments.filter(s=>s.status==="ACCEPTED").length," ","rendez-vous √† venir."]})}),e.jsx(C,{children:o(p,"ACCEPTED").map(s=>e.jsx(x,{appointment:s,acceptAppointment:y,cancelAppointment:j},s.id))})]})]}):e.jsx("p",{className:"text-muted",children:"Vous n'avez aucun rendez-vous √† venir."})})]}),e.jsx(L,{variant:"destructive",onClick:M,className:"w-fit mt-auto",children:"Se d√©connecter"})]})}export{ne as default};
