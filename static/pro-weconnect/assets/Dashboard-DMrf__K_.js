import{c as E,j as e,a as V,b as k,B as D,u as L,d as B,r as p,e as R,L as b}from"./index-Ci_gFaSa.js";import{M as m}from"./index-DaPLuW7X.js";import{A as S,a as y,b as A,c as z}from"./accordion-DYE-RYjH.js";import{B as $,a as I,b as F,c as G}from"./breadcrumb-CvHjqGgT.js";import{T as q,a as l,b as O,c as C}from"./tabs-1b_v3isz.js";import{u as H}from"./useAxiosPrivate-BtBvMKHT.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=E("BellDot",[["path",{d:"M19.4 14.9C20.2 16.4 21 17 21 17H3s3-2 3-9c0-3.3 2.7-6 6-6 .7 0 1.3.1 1.9.3",key:"xcehk"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["circle",{cx:"18",cy:"8",r:"3",key:"1g0gzu"}]]);/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=E("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),J=k("inline-flex items-center rounded-full border px-2.5 py-0.5 text-sm w-fit font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-light",outline:"border-transparent bg-dark/10",success:"border-transparent bg-success text-light"}},defaultVariants:{variant:"default"}});function d({className:s,variant:n,...r}){return e.jsx("div",{className:V(J({variant:n}),s),...r})}const K=({appointment:s,acceptAppointment:n,cancelAppointment:r,today:x=!1,past:a=!1})=>e.jsxs("div",{className:`flex flex-col gap-2 py-2 ${a&&"text-muted"}`,children:[e.jsx("div",{className:"divider divider-start my-0",children:e.jsxs("h2",{className:"text-xl font-semibold",children:[s.client.firstName," ",s.client.lastName]})}),e.jsx("div",{className:"flex flex-col md:flex-row md:gap-4",children:e.jsx(D,{variant:"link",className:`w-fit py-0 ${a&&"text-muted"}`,children:e.jsx("a",{href:`tel:${s.client.phoneNumber}`,children:s.client.phoneNumber.replace(/(\d{2})(?=\d)/g,"$1 ")})})}),e.jsxs("h3",{className:"text-lg",children:[e.jsx("span",{className:"font-medium",children:s.service.name})," ",e.jsx("br",{}),!x&&e.jsxs(e.Fragment,{children:["le"," ",e.jsxs("span",{className:"font-medium",children:[new Date(s.date).toLocaleDateString("fr-FR",{weekday:"long",month:"long",day:"numeric"}).toUpperCase()," "]})]}),"√†"," ",e.jsx("span",{className:"font-medium",children:new Date(s.date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),s.status==="PENDING"&&e.jsx(d,{variant:"outline",className:a&&"bg-muted",children:"En attente de confirmation"}),s.status==="ACCEPTED"&&e.jsx(d,{className:a&&"bg-muted",children:"Rendez-vous confirm√©"}),s.status==="COMPLETED"&&e.jsx(d,{variant:"success",className:a&&"bg-muted",children:"Pass√©"}),s.status==="CANCELLED"&&e.jsx(d,{variant:"destructive",className:a&&"bg-muted",children:"Annul√©"}),s.status==="PENDING"&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx(m,{id:s.id,action:n,actionLabel:"Accepter",title:"Accepter le rendez-vous",description:"√ätes-vous s√ªr de vouloir accepter ce rendez-vous ?",successMessage:"Rendez-vous accept√©",trigger:"Accepter",variant:"success"}),e.jsx(m,{id:s.id,action:r,actionLabel:"Refuser",title:"Refuser le rendez-vous",description:"√ätes-vous s√ªr de vouloir refuser ce rendez-vous ?",successMessage:"Rendez-vous refus√©",trigger:"Refuser",variant:"destructive"})]}),s.status==="ACCEPTED"&&e.jsx("div",{className:"ml-auto",children:e.jsx(m,{id:s.id,action:r,actionLabel:"Annuler",title:"Annuler le rendez-vous",description:"√ätes-vous s√ªr de vouloir annuler ce rendez-vous ?",successMessage:"Rendez-vous annul√©",trigger:"Annuler",variant:"destructive"})})]}),u=K,Q=()=>{const{setAuth:s}=L();return async()=>{s(null);try{await B.get("/api/auth/logout",{withCredentials:!0})}catch(r){console.error(r)}}},X=Q;function ae(){const[s,n]=p.useState(),[r,x]=p.useState(!0),{auth:a}=L(),w=X(),h=H(),P=R();async function v(){try{const t=await h.get("/api/appointments/provider");n(t.data)}catch(t){console.error(t)}finally{x(!1)}}async function N(t){try{await h.patch(`/api/appointments/${t}`,{status:"ACCEPTED"}),v()}catch(i){console.error(i)}}async function g(t){try{await h.patch(`/api/appointments/${t}`,{status:"CANCELLED"}),v()}catch(i){console.error(i)}}const c=(t,i)=>t.filter(j=>j.status===i).sort((j,M)=>new Date(j.date)-new Date(M.date)),T=async()=>{await w(),P("/login")};p.useEffect(()=>{v()},[]);const o=(s==null?void 0:s.todaysAppointments)||[],f=(s==null?void 0:s.futureAppointments)||[];return e.jsxs("main",{className:"w-full h-full max-w-screen-md mx-auto p-6 flex flex-1 flex-col gap-4",children:[e.jsx($,{className:"h-0 p-0",children:e.jsx(I,{children:e.jsx(F,{children:e.jsx(G,{asChild:!0,children:e.jsx(b,{to:"/",children:"Tableau de bord"})})})})}),e.jsxs(q,{defaultValue:"today",className:"space-y-4",children:[e.jsx(l,{value:"today",children:e.jsx("h1",{className:"text-3xl font-semibold",children:"Mes rendez-vous de la journ√©e"})}),e.jsx(l,{value:"incoming",children:e.jsx("h1",{className:"text-3xl font-semibold",children:"Mes rendez-vous √† venir"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(O,{children:[e.jsx(C,{value:"today",children:"Aujourd'hui"}),e.jsx(C,{value:"incoming",children:"√Ä venir"})]}),e.jsx(b,{to:"/salon",children:e.jsx(W,{size:24,className:"text-primary"})}),!r&&!(a!=null&&a.email)&&e.jsx("div",{className:"ml-auto",children:e.jsx(m,{defaultOpen:!0,title:"Nouveaut√© : connexion par e-mail",description:`Chers professionnels,

Apr√®s la prochaine mise √† jour, vous devrez vous connecter avec votre adresse e-mail pour acc√©der √† votre espace. Vous pouvez mettre √† jour votre adresse e-mail sur la page des informations de votre salon.

Merci de votre compr√©hension, l'√©quipe WeConnect üöÄ`,cancelText:"C'est compris !",trigger:e.jsx(U,{size:24,className:"text-primary"}),triggerVariant:"ghost"})})]}),e.jsx(l,{value:"today",className:"space-y-4",children:!r&&o.length?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-muted",children:["Vous avez ",o.length," rendez-vous aujourd'hui."]}),c(o,"ACCEPTED").map(t=>e.jsx(u,{appointment:t,cancelAppointment:g,today:!0},t.id)),e.jsx("div",{className:"divider divider-start text-muted",children:"Mes rendez-vous pass√©s"}),c(o,"COMPLETED").map(t=>e.jsx(u,{appointment:t,past:!0,today:!0},t.id))]}):e.jsxs("p",{className:"text-muted",children:[" ","Vous n'avez aucun rendez-vous aujourd'hui."]})}),e.jsx(l,{value:"incoming",children:f.length?e.jsxs(S,{type:"single",collapsible:!0,defaultValue:"item-0",className:"w-full space-y-4",children:[e.jsxs(y,{value:"item-0",children:[e.jsx(A,{children:e.jsxs("p",{className:"text-muted",children:["Vous avez"," ",s.futureAppointments.filter(t=>t.status==="PENDING").length," ","demande(s) en attente."]})}),e.jsx(z,{children:c(f,"PENDING").map(t=>e.jsx(u,{appointment:t,acceptAppointment:N,cancelAppointment:g},t.id))})]}),e.jsxs(y,{value:"item-1",children:[e.jsx(A,{children:e.jsxs("p",{className:"text-muted",children:["Vous avez"," ",s.futureAppointments.filter(t=>t.status==="ACCEPTED").length," ","rendez-vous √† venir."]})}),e.jsx(z,{children:c(f,"ACCEPTED").map(t=>e.jsx(u,{appointment:t,acceptAppointment:N,cancelAppointment:g},t.id))})]})]}):e.jsx("p",{className:"text-muted",children:"Vous n'avez aucun rendez-vous √† venir."})})]}),e.jsx(D,{variant:"destructive",onClick:T,className:"w-fit mt-auto",children:"Se d√©connecter"})]})}export{ae as default};
