import{c as y,j as e,B as A,a as i,M as v,r as x,u as E,b as D,T as C,d as l,e as b,f as j,L as w,A as z,g as f,h as N,i as g}from"./index-CtwV1XUq.js";/**
 * @license lucide-react v0.400.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=y("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),L=({appointment:a,acceptAppointment:c,cancelAppointment:m,today:d=!1,past:r=!1})=>e.jsxs("div",{className:`flex flex-col gap-2 py-2 ${r&&"text-muted"}`,children:[e.jsx("div",{className:"divider divider-start my-0",children:e.jsxs("h2",{className:"text-xl font-semibold",children:[a.client.firstName," ",a.client.lastName]})}),e.jsx("div",{className:"flex flex-col md:flex-row md:gap-4",children:e.jsx(A,{variant:"link",className:`w-fit p-0 h-min ${r&&"text-muted"}`,children:e.jsx("a",{href:`tel:${a.client.phoneNumber}`,children:a.client.phoneNumber.replace(/(\d{2})(?=\d)/g,"$1 ")})})}),e.jsxs("h3",{className:"text-lg",children:[e.jsx("span",{className:"font-medium",children:a.service.name})," ",e.jsx("br",{}),!d&&e.jsxs(e.Fragment,{children:["le"," ",e.jsxs("span",{className:"font-medium",children:[new Date(a.date).toLocaleDateString("fr-FR",{weekday:"long",month:"long",day:"numeric"}).toUpperCase()," "]})]}),"à"," ",e.jsx("span",{className:"font-medium",children:new Date(a.date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]}),a.status==="PENDING"&&e.jsx(i,{variant:"outline",className:r&&"bg-muted",children:"En attente de confirmation"}),a.status==="ACCEPTED"&&e.jsx(i,{variant:"success",className:r&&"bg-muted",children:"Confirmé"}),a.status==="COMPLETED"&&e.jsx(i,{variant:"success",className:r&&"bg-muted",children:"Passé"}),a.status==="CANCELLED"&&e.jsx(i,{variant:"destructive",className:r&&"bg-muted",children:"Annulé"}),e.jsxs("div",{className:"flex justify-between",children:[a.status==="PENDING"&&e.jsx(v,{id:a.id,action:c,actionLabel:"Accepter",title:"Accepter le rendez-vous",description:"Êtes-vous sûr de vouloir accepter ce rendez-vous ?",trigger:"Accepter",variant:"success"}),(a.status==="PENDING"||a.status==="ACCEPTED")&&e.jsx(v,{id:a.id,action:m,actionLabel:"Refuser",title:"Refuser le rendez-vous",description:"Êtes-vous sûr de vouloir refuser ce rendez-vous ?",trigger:"Refuser",variant:"destructive"})]})]}),n=L;function V(){const[a,c]=x.useState(),[m,d]=x.useState(!0),r=E(),p=D();async function o(){try{const s=await r.get("/api/appointments/provider");c(s.data)}catch(s){console.error(s)}finally{d(!1)}}async function h(s){try{await r.patch(`/api/appointments/${s}`,{status:"ACCEPTED"}),o()}catch(t){console.error(t)}}async function u(s){try{await r.patch(`/api/appointments/${s}`,{status:"CANCELLED"}),o()}catch(t){console.error(t)}}return x.useEffect(()=>{o()},[]),e.jsxs("main",{className:"w-full max-w-screen-md mx-auto p-6 flex flex-1 flex-col gap-4",children:[e.jsx(A,{variant:"link",className:"justify-start h-0 p-0",onClick:()=>p(-1),children:"Retour"}),e.jsxs(C,{defaultValue:"today",className:"space-y-4",children:[e.jsx(l,{value:"today",children:e.jsx("h1",{className:"text-3xl font-semibold",children:"Mes rendez-vous de la journée"})}),e.jsx(l,{value:"incoming",children:e.jsx("h1",{className:"text-3xl font-semibold",children:"Mes rendez-vous à venir"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(b,{children:[e.jsx(j,{value:"today",children:"Aujourd'hui"}),e.jsx(j,{value:"incoming",children:"À venir"})]}),e.jsx(w,{to:"/salon",children:e.jsx(P,{size:24,className:"text-primary"})})]}),e.jsx(l,{value:"today",className:"space-y-4",children:a!=null&&a.todaysAppointments.length?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-muted",children:["Vous avez ",a==null?void 0:a.todaysAppointments.length," rendez-vous aujourd'hui."]}),a.todaysAppointments.filter(s=>s.status==="ACCEPTED").sort((s,t)=>new Date(s.date)-new Date(t.date)).map(s=>e.jsx(n,{appointment:s,cancelAppointment:u,today:!0},s.id)),e.jsx("div",{className:"divider divider-start text-muted",children:"Mes rendez-vous passés"}),a.todaysAppointments.filter(s=>s.status==="COMPLETED").sort((s,t)=>new Date(t.date)-new Date(s.date)).map(s=>e.jsx(n,{appointment:s,past:!0,today:!0},s.id))]}):e.jsxs("p",{className:"text-muted",children:[" ","Vous n'avez aucun rendez-vous aujourd'hui."]})}),e.jsx(l,{value:"incoming",children:a!=null&&a.futureAppointments.length?e.jsxs(z,{type:"single",collapsible:!0,defaultValue:"item-0",className:"w-full",children:[e.jsxs(f,{value:"item-0",children:[e.jsx(N,{children:e.jsxs("p",{className:"text-muted",children:["Vous avez"," ",a.futureAppointments.filter(s=>s.status==="PENDING").length," ","demande(s) en attente."]})}),e.jsx(g,{children:a.futureAppointments.filter(s=>s.status==="PENDING").sort((s,t)=>new Date(s.date)-new Date(t.date)).map(s=>e.jsx(n,{appointment:s,acceptAppointment:h,cancelAppointment:u},s.id))})]}),e.jsxs(f,{value:"item-1",children:[e.jsx(N,{children:e.jsxs("p",{className:"text-muted",children:["Vous avez"," ",a.futureAppointments.filter(s=>s.status==="ACCEPTED").length," ","rendez-vous à venir."]})}),e.jsx(g,{children:a.futureAppointments.filter(s=>s.status==="ACCEPTED").sort((s,t)=>new Date(s.date)-new Date(t.date)).map(s=>e.jsx(n,{appointment:s,acceptAppointment:h,cancelAppointment:u},s.id))})]})]}):e.jsx("p",{className:"text-muted",children:"Vous n'avez aucun rendez-vous à venir."})})]})]})}export{V as default};
